webpackJsonp([8,16],{7:function(t,e,s){s(10);var o=s(1)(s(13),s(11),"data-v-4d40f634",null);t.exports=o.exports},9:function(t,e,s){e=t.exports=s(3)(),e.push([t.id,".toast[data-v-4d40f634]{position:fixed;top:0;left:0;width:100%;height:100%}.toast .toast-mask[data-v-4d40f634]{position:absolute;top:0;left:0;width:100%;height:100%;background:transparent}.toast .toast-text[data-v-4d40f634]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);padding:20px;min-width:120px;max-width:80%;line-height:1.5em;text-align:center;color:#fff;background:rgba(0,0,0,.7);border-radius:4px}",""])},10:function(t,e,s){var o=s(9);"string"==typeof o&&(o=[[t.id,o,""]]);s(4)(o,{});o.locals&&(t.exports=o.locals)},11:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"toast"},[s("div",{staticClass:"toast-mask"}),t._v(" "),s("div",{staticClass:"toast-text"},[t._v(t._s(t.text))])])},staticRenderFns:[]}},13:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:{text:{type:String},t:{type:Number,default:2e3},show:{type:Boolean,defalut:!1}}}},139:function(t,e,s){e=t.exports=s(3)(),e.push([t.id,".orderlist-wrap{line-height:1em;color:#343434;overflow-y:auto}.orderlist_scroll_UL{padding-top:12px}.orderlist-wrap .bg-white{display:-ms-flexbox;display:flex;margin-bottom:12px}.orderlist-wrap .bg-white .orderList-logobox{-ms-flex:0 0 42px;flex:0 0 42px;margin:10px;width:42px;height:42px}.orderlist-wrap .bg-white .orderList-logobox img{border-radius:5px}.orderlist-wrap .bg-white .oL-content{-ms-flex:1;flex:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.orderlist-wrap .bg-white .oL-content .aa{position:relative;box-sizing:border-box;padding-top:10px;padding-right:10px;line-height:20px}.orderlist-wrap .bg-white .oL-content .aa .orderTitle{display:block;box-sizing:border-box;padding-right:65px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.orderlist-wrap .bg-white .oL-content .aa .orderTitle .btn_right{display:inline-block;vertical-align:top;color:#b2b2b2;font-size:10px}.orderlist-wrap .bg-white .oL-content .aa .orderStatus{position:absolute;top:8px;right:10px}.orderlist-wrap .bg-white .oL-content .bb{margin-top:3px;line-height:20px;font-size:10px;color:#b2b2b2}.order-status0{color:#ff5083}.order-status1,.order-status2,.order-status3,.order-status4,.order-status8,.order-status9,.order-status13{color:#ff8932}.order-status5,.order-status7,.order-status10,.order-status11,.order-status12{color:#343434}.order-status6{color:#b3b3b3}.orderlist-wrap .data-status{padding:30px 0;text-align:center}",""])},183:function(t,e,s){var o=s(139);"string"==typeof o&&(o=[[t.id,o,""]]);s(4)(o,{});o.locals&&(t.exports=o.locals)},213:function(t,e,s){s(183);var o=s(1)(s(297),s(229),null,null);t.exports=o.exports},229:function(t,e,s){t.exports={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"orderlist-wrap",attrs:{id:"orderlist"}},[o("div",{attrs:{id:"orderlist_scroll"}},[o("ul",{staticClass:"orderlist_scroll_UL"},t._l(t.orderList,function(e){return o("li",{staticClass:"bg-white",on:{click:function(s){t.viewDetail(e.orderNo,e.id)}}},[o("div",{staticClass:"orderList-logobox"},[e.shopLogo?o("img",{attrs:{src:e.shopLogo,width:"42px",height:"42px"}}):o("img",{attrs:{src:s(61),width:"42px",height:"42px"}})]),t._v(" "),o("div",{staticClass:"oL-content"},[o("div",{staticClass:"aa"},[o("div",{staticClass:"orderTitle"},[t._v(t._s(e.shopName)+"   "),o("i",{staticClass:"uxwm-iconfont btn_right"})]),t._v(" "),o("span",{staticClass:"orderStatus",class:"order-status"+e.state},[t._v(t._s(e.stateMsgC))])]),t._v(" "),o("p",{staticClass:"bb"},[t._v("\n            "+t._s(e.orderTime)+"\n            ")])])])})),t._v(" "),o("p",{staticClass:"data-status"},[t._v(t._s(t.dataStatus))])]),t._v(" "),o("toast",{attrs:{show:t.toastShow,text:t.toastText}})],1)},staticRenderFns:[]}},297:function(t,e,s){"use strict";function o(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e.default=t,e}function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=s(7),a=r(i),d=s(22),n=s(33),l=o(n);e.default={mounted:function(){var t=this,e=document.getElementById("orderlist"),s=document.getElementById("orderlist_scroll");e.style.height=document.body.clientHeight+"px",e.onscroll=function(){s.offsetHeight-e.offsetHeight-e.scrollTop<45&&t.hasMore&&t.getOrderList()}},data:function(){return{sessionId:"",shopId:"",pageIndex:1,pageSize:20,isAjaxing:!1,hasMore:!0,toastShow:!1,toastText:"",dataStatus:"",orderList:null,orderStatusText:["未付款","已付款","已接单","已接单","配送中","已完成","订单关闭","已拒单"]}},components:{Toast:a.default},created:function(){this.shopId=this.$route.query.shopId,this.customerId=this.$route.query.customerId,this.shopId&&this.customerId?this.getOrderList(this.customerId):this.isCode(),this.getReverTime()},methods:{isCode:function(){var t=this,e=window.location.href;if(null===(0,d.getStore)("openId"))if(e.indexOf("code")<0)this.to();else{var s={code:(0,d.urlParse)().code,type:1},o="/mp/authority/customer";this.axios.post(o,s).then(function(e){e=e.data,t.customerId=e.data.customerId,(0,d.setStore)("openId",{customerId:e.data.customerId}),t.getOrderList(t.customerId)})}else if(void 0===(0,d.getStore)("openId").customerId){var r={code:(0,d.urlParse)().code,type:1},i="/mp/authority/customer";this.axios.post(i,r).then(function(e){e=e.data,t.customerId=e.data.customerId,(0,d.setStore)("openId",{customerId:e.data.customerId}),t.getOrderList(t.customerId)})}else this.customerId=(0,d.getStore)("openId").customerId,this.getOrderList(this.customerId);l.changeTitleInWx("我的订单"),this.sessionId=(0,d.getStore)("openId").customerId||this.$route.query.customerId||(0,d.getStore)("userInfo").customerId},to:function(){var t=encodeURIComponent("http://newpay.tunnel.qydev.com/VAOrderH5/?#/orderList"),e="https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx96f6daa5f8a71039&redirect_uri="+t+"&response_type=code&scope=snsapi_base&state=STATE#wechat_redirect";window.location.href=e},getOrderList:function(t){var e=this;if(!this.isAjaxing){this.isAjaxing=!0,this.dataStatus="加载中...";var s={sessionId:t,shopId:this.shopId,pageSize:this.pageSize,pageIndex:this.pageIndex};this.axios.get("/br/order/list"+this.PublicJs.createParams(s)).then(function(t){if(t=t.data,t.success){if(e.isAjaxing=!1,e.orderList)for(var s=0;s<t.data.lstOrderInfos.length;s++)e.orderList.push(t.data[s]);else e.orderList=t.data.lstOrderInfos;setTimeout(function(){t.data.hasMore?e.dataStatus="加载更多":e.dataStatus="没有更多了"},400),e.$nextTick(function(){e.pageIndex++,e.hasMore=t.data.hasMore})}else e.dataStatus="加载失败",e.toastShow=!0,e.toastText="网络异常，请稍候再试",setTimeout(function(){e.toastShow=!1,e.toastText=""},1e3)},function(t){e.isAjaxing=!1,e.dataStatus="加载失败",e.toastShow=!0,e.toastText="网络异常，请稍候再试",setTimeout(function(){e.toastShow=!1,e.toastText=""},1e3)})}},viewDetail:function(t,e){this.$router.push({path:"/orderDetail",query:{orderNo:t,orderId:e,sid:this.sessionId,shopId:this.shopId}})},getReverTime:function(){this.axios.get("/br/shop/status?shopId="+this.shopId+"&customerId="+this.customerId).then(function(t){t=t.data,t.success&&(0,d.setStore)("hours",t.data.hours)})}}}}});