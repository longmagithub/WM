webpackJsonp([7,15],{7:function(t,e,a){a(9);var s=a(1)(a(11),a(10),"data-v-4d40f634",null);t.exports=s.exports},8:function(t,e,a){e=t.exports=a(3)(),e.push([t.id,".toast[data-v-4d40f634]{position:fixed;top:0;left:0;width:100%;height:100%}.toast .toast-mask[data-v-4d40f634]{position:absolute;top:0;left:0;width:100%;height:100%;background:transparent}.toast .toast-text[data-v-4d40f634]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);padding:20px;min-width:120px;max-width:80%;line-height:1.5em;text-align:center;color:#fff;background:rgba(0,0,0,.7);border-radius:4px}",""])},9:function(t,e,a){var s=a(8);"string"==typeof s&&(s=[[t.id,s,""]]);a(4)(s,{});s.locals&&(t.exports=s.locals)},10:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"toast"},[a("div",{staticClass:"toast-mask"}),t._v(" "),a("div",{staticClass:"toast-text"},[t._v(t._s(t.text))])])},staticRenderFns:[]}},11:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:{text:{type:String},t:{type:Number,default:2e3},show:{type:Boolean,defalut:!1}}}},132:function(t,e,a){e=t.exports=a(3)(),e.push([t.id,".bb[data-v-ecc18f3a]{border-bottom:1px solid #f1f1f1}.orderlist-wrap[data-v-ecc18f3a]{line-height:1em;color:#343434;overflow-y:auto}.orderlist-wrap ul[data-v-ecc18f3a]{padding-top:12px}.orderlist-wrap ul li[data-v-ecc18f3a]{margin-bottom:12px}.orderlist-wrap ul li p[data-v-ecc18f3a]{margin-left:16px;padding:16px 16px 16px 0}.orderlist-wrap ul li p span[data-v-ecc18f3a]{float:right}.orderlist-wrap ul li p .order-status0[data-v-ecc18f3a]{color:#ff5083}.orderlist-wrap ul li p .order-status1[data-v-ecc18f3a],.orderlist-wrap ul li p .order-status2[data-v-ecc18f3a],.orderlist-wrap ul li p .order-status3[data-v-ecc18f3a],.orderlist-wrap ul li p .order-status4[data-v-ecc18f3a],.orderlist-wrap ul li p .order-status8[data-v-ecc18f3a],.orderlist-wrap ul li p .order-status9[data-v-ecc18f3a],.orderlist-wrap ul li p .order-status13[data-v-ecc18f3a]{color:#ff8932}.orderlist-wrap ul li p .order-status5[data-v-ecc18f3a],.orderlist-wrap ul li p .order-status7[data-v-ecc18f3a],.orderlist-wrap ul li p .order-status10[data-v-ecc18f3a],.orderlist-wrap ul li p .order-status11[data-v-ecc18f3a],.orderlist-wrap ul li p .order-status12[data-v-ecc18f3a]{color:#343434}.orderlist-wrap ul li p .order-status6[data-v-ecc18f3a]{color:#b3b3b3}.orderlist-wrap ul li p[data-v-ecc18f3a]:last-child{display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between}.orderlist-wrap ul li p[data-v-ecc18f3a]:after{clear:both}.orderlist-wrap .data-status[data-v-ecc18f3a]{padding:30px 0;text-align:center}",""])},162:function(t,e,a){var s=a(132);"string"==typeof s&&(s=[[t.id,s,""]]);a(4)(s,{});s.locals&&(t.exports=s.locals)},179:function(t,e,a){a(162);var s=a(1)(a(252),a(206),"data-v-ecc18f3a",null);t.exports=s.exports},206:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"orderlist-wrap",attrs:{id:"orderlist"}},[a("div",{attrs:{id:"orderlist_scroll"}},[a("ul",t._l(t.orderList,function(e){return a("li",{staticClass:"bg-white",on:{click:function(a){t.viewDetail(e.orderNo,e.id)}}},[a("p",{staticClass:"bb"},[t._v("\n          "+t._s(e.orderTime)+"\n          "),t._v(" "),a("span",{class:"order-status"+e.state},[t._v(t._s(e.stateMsgC))])]),t._v(" "),a("p",{staticClass:"aa"},[a("span",[t._v(t._s(e.shopName))]),a("span",[t._v("￥"+t._s(e.payPrice))])])])})),t._v(" "),a("p",{staticClass:"data-status"},[t._v(t._s(t.dataStatus))])]),t._v(" "),a("toast",{attrs:{show:t.toastShow,text:t.toastText}})],1)},staticRenderFns:[]}},252:function(t,e,a){"use strict";function s(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e.default=t,e}function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=a(7),i=r(o),d=a(16),n=a(23),l=s(n);e.default={mounted:function(){var t=this,e=document.getElementById("orderlist"),a=document.getElementById("orderlist_scroll");e.style.height=document.body.clientHeight+"px",e.onscroll=function(){a.offsetHeight-e.offsetHeight-e.scrollTop<45&&t.hasMore&&t.getOrderList()}},data:function(){return{sessionId:"",shopId:"",pageIndex:1,pageSize:20,isAjaxing:!1,hasMore:!0,toastShow:!1,toastText:"",dataStatus:"",orderList:null,orderStatusText:["未付款","已付款","已接单","已接单","配送中","已完成","订单关闭","已拒单"]}},components:{Toast:i.default},created:function(){var t=this,e=window.location.href;if(null===(0,d.getStore)("openId"))if(e.indexOf("code")<0)console.log("没有授权"),this.to();else{var a={code:(0,d.urlParse)().code,type:1},s="/mp/authority/customer";this.axios.post(s,a).then(function(e){e=e.data,t.customerId=e.data.customerId,(0,d.setStore)("openId",{customerId:e.data.customerId})})}else if(void 0===(0,d.getStore)("openId").customerId){var r={code:(0,d.urlParse)().code,type:1},o="/mp/authority/customer";this.axios.post(o,r).then(function(e){e=e.data,t.customerId=e.data.customerId,(0,d.setStore)("openId",{customerId:e.data.customerId})})}else this.customerId=(0,d.getStore)("openId").customerId;l.changeTitleInWx("我的订单"),this.sessionId=this.$route.query.customerId||(0,d.getStore)("userInfo").customerId,this.getOrderList()},methods:{to:function(){var t=encodeURIComponent("http://newpay.tunnel.qydev.com/VAOrderH5/?#/orderList"),e="https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx96f6daa5f8a71039&redirect_uri="+t+"&response_type=code&scope=snsapi_base&state=STATE#wechat_redirect";window.location.replace(e)},getOrderList:function(){var t=this;if(!this.isAjaxing){this.isAjaxing=!0,this.dataStatus="加载中...";var e={sessionId:this.sessionId,pageSize:this.pageSize,pageIndex:this.pageIndex};this.axios.get("/br/order/list"+this.PublicJs.createParams(e)).then(function(e){if(e=e.data,e.success){if(t.isAjaxing=!1,t.orderList)for(var a=0;a<e.data.lstOrderInfos.length;a++)t.orderList.push(e.data[a]);else t.orderList=e.data.lstOrderInfos,console.log(t.orderList);setTimeout(function(){e.data.hasMore?t.dataStatus="加载更多":t.dataStatus="没有更多了"},400),t.$nextTick(function(){t.pageIndex++,t.hasMore=e.data.hasMore})}else t.dataStatus="加载失败",t.toastShow=!0,t.toastText="网络异常，请稍候再试",setTimeout(function(){t.toastShow=!1,t.toastText=""},1e3)},function(e){t.isAjaxing=!1,t.dataStatus="加载失败",t.toastShow=!0,t.toastText="网络异常，请稍候再试",setTimeout(function(){t.toastShow=!1,t.toastText=""},1e3)})}},viewDetail:function(t,e){this.$router.push({path:"/orderDetail",query:{orderNo:t,orderId:e,sid:this.sessionId,shopId:this.shopId}})}}}}});