webpackJsonp([2,0],[function(t,e,s){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e.default=t,e}function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.store=e.router=e.app=void 0;var o=s(7),n=a(o),r=s(56),c=a(r),d=s(25),l=a(d),u=s(99),h=a(u),p=s(194),f=a(p),v=s(197),m=a(v),_=s(62),g=a(_),C=s(98),I=a(C),w=s(185),x=a(w),S=s(186),T=s(192),y=i(T),b=s(193),D=a(b),P=s(59),R=i(P),k=s(102),E=a(k);l.default.component("iconfont",E.default),(0,S.sync)(m.default,f.default),(0,c.default)(y).forEach(function(t){l.default.filter(t,y[t])}),console.log(D.default),l.default.use(I.default,g.default),l.default.use(x.default),l.default.prototype.PublicJs=R,l.default.prototype.api="/VAOrderH5";var N=new l.default((0,n.default)({router:f.default,store:m.default},h.default)).$mount("#app");e.app=N,e.router=f.default,e.store=m.default},,,,,,,,function(t,e,s){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function a(){var t=window.location.search,e={},s=/[?&][^?&]+=[^?&]+/g,i=t.match(s);return i&&i.forEach(function(t){var s=t.substring(1).split("="),i=decodeURIComponent(s[0]),a=decodeURIComponent(s[1]);e[i]=a}),e}Object.defineProperty(e,"__esModule",{value:!0}),e.removeStore=e.getStore=e.setStore=void 0;var o=s(33),n=i(o);e.urlParse=a;e.setStore=function(t,e){t&&("string"!=typeof e&&(e=(0,n.default)(e)),window.localStorage.setItem(t,e))},e.getStore=function(t){if(t)return JSON.parse(window.localStorage.getItem(t))},e.removeStore=function(t){t&&window.localStorage.removeItem(t)}},function(t,e,s){s(85);var i=s(1)(s(211),s(127),"data-v-4d40f634",null);t.exports=i.exports},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,s){s(89);var i=s(1)(s(200),s(131),"data-v-65b63b7c",null);t.exports=i.exports},,,,,,,,,,,,,,,function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.SET_STATUS="SET_STATUS",e.RECORD_ADDRESS="RECORD_ADDRESS",e.ADD_CART="ADD_CART",e.REDUCE_CART="REDUCE_CART",e.INIT_BUYCART="INIT_BUYCART",e.CLEAR_CART="CLEAR_CART",e.RECORD_SHOPDETAIL="RECORD_SHOPDETAIL",e.RECORD_USERINFO="RECORD_USERINFO",e.GET_USERINFO="GET_USERINFO",e.CONFIRM_REMARK="CONFIRM_REMARK",e.CONFIRM_INVOICE="CONFIRM_INVOICE",e.CHOOSE_SEARCH_ADDRESS="CHOOSE_SEARCH_ADDRESS",e.SAVE_GEOHASH="SAVE_GEOHASH",e.CHOOSE_ADDRESS="CHOOSE_ADDRESS",e.NEED_VALIDATION="NEED_VALIDATION",e.SAVE_CART_ID_SIG="SAVE_CART_ID_SIG",e.SAVE_ORDER_PARAM="SAVE_ORDER_PARAM",e.CHANGE_ORDER_PARAM="CHANGE_ORDER_PARAM",e.ORDER_SUCCESS="ORDER_SUCCESS",e.SAVE_SHOPID="SAVE_SHOPID",e.SAVE_ORDER="SAVE_ORDER",e.OUT_LOGIN="OUT_LOGIN",e.USER_PRICE="USER_PRICE",e.USER_ADDRESSID="USER_ADDRESSID"},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.changeTitleInWx=function(t){document.title=t;var e=document.createElement("iframe");e.src="/favicon.ico",e.style.display="none",e.onload=function(){setTimeout(function(){e.remove()},9)},document.body.appendChild(e)},e.isWechat=function(){var t=window.navigator.userAgent.toLowerCase(),e=t.match(/MicroMessenger\/([\d.]+)/i);return e?e[1]<"5.0"?1:2:0},e.createParams=function(t){var e=[];for(var s in t)e.push((s+"="+t[s]).toString());return"?"+e.join("&")},e.formatTime=function(t,e){if(!t)return"-";var s=new Date(0),i=new Date("1970/01/01 08:00:00");t=parseInt(t)+(i.getTime()-s.getTime())/1e3;var a=new Date(1e3*parseInt(t)),o=e,n={"M+":a.getMonth()+1,"d+":a.getDate(),"h+":a.getHours(),"s+":a.getSeconds(),"m+":a.getMinutes(),"q+":Math.floor((a.getMonth()+3)/3),S:a.getMilliseconds()};/(y+)/.test(o)&&(o=o.replace(RegExp.$1,(a.getFullYear()+"").substr(4-RegExp.$1.length)));for(var r in n)new RegExp("("+r+")").test(o)&&(o=o.replace(RegExp.$1,1===RegExp.$1.length?n[r]:("00"+n[r]).substr((""+n[r]).length)));return o},e.callPhone=function(t){window.location.href="tel:"+t},e.bubbleSort=function(t){for(var e=0;e<t.length;e++)for(var s=e;s<t.length;s++)if(t[e].price>t[s].price){var i=t[e];t[e]=t[s],t[s]=i}return t}},,,,,,,,,,,,,,,,,,,,,,function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},,function(t,e,s){s(81);var i=s(1)(s(199),s(121),null,null);t.exports=i.exports},function(t,e,s){s(88);var i=s(1)(s(201),s(130),"data-v-5d4c65dc",null);t.exports=i.exports},function(t,e,s){s(90);var i=s(1)(s(202),s(132),"data-v-667d47e4",null);t.exports=i.exports},function(t,e,s){s(91);var i=s(1)(s(203),s(133),null,null);t.exports=i.exports},function(t,e,s){s(87);var i=s(1)(s(204),s(129),"data-v-5c6bbfd4",null);t.exports=i.exports},function(t,e,s){s(82);var i=s(1)(s(205),s(123),"data-v-399dfba4",null);t.exports=i.exports},function(t,e,s){s(86);var i=s(1)(s(206),s(128),"data-v-5019535e",null);t.exports=i.exports},function(t,e,s){s(97);var i=s(1)(s(207),s(140),"data-v-f5361b16",null);t.exports=i.exports},function(t,e,s){s(84);var i=s(1)(s(208),s(126),"data-v-4a6d7f9c",null);t.exports=i.exports},function(t,e,s){var i=s(1)(s(209),s(120),null,null);t.exports=i.exports},function(t,e,s){s(92);var i=s(1)(s(210),s(134),"data-v-70cab510",null);t.exports=i.exports},function(t,e,s){s(94);var i=s(1)(s(212),s(137),"data-v-9b3a6b14",null);t.exports=i.exports},function(t,e,s){s(93);var i=s(1)(s(213),s(135),"data-v-7115ddf8",null);t.exports=i.exports},function(t,e,s){s(95);var i=s(1)(s(214),s(138),"data-v-ebbd9154",null);t.exports=i.exports},function(t,e,s){s(96);var i=s(1)(s(215),s(139),"data-v-ecc18f3a",null);t.exports=i.exports},function(t,e,s){s(83);var i=s(1)(s(216),s(125),"data-v-40d911c0",null);t.exports=i.exports},function(t,e,s){var i=s(1)(s(217),s(124),null,null);t.exports=i.exports},function(t,e,s){var i=s(1)(s(218),s(122),null,null);t.exports=i.exports},function(t,e,s){var i=s(1)(s(219),s(136),null,null);t.exports=i.exports},function(t,e,s){var i=s(1)(s(220),s(119),null,null);t.exports=i.exports},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div")},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.msTime.show?s("p",[s("span",[t._v(t._s(t.msTime.hour)+":")]),t._v(" "),s("span",[t._v(t._s(t.msTime.minutes)+":")]),t._v(" "),s("span",[t._v(t._s(t.msTime.seconds))])]):t._e(),t._v(" "),t.msTime.show?t._e():s("p",{staticClass:"timeNum"},[t._v(t._s(t.endText))])])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("transition",{attrs:{name:"fade",mode:"out-in"}},[s("router-view",{staticClass:"view"})],1)],1)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div")},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"shopcart_module"},[s("div",{staticClass:"shopcart"},[s("div",{staticClass:"content",on:{click:t.toggleList}},[s("div",{staticClass:"content-left"},[s("div",{staticClass:"logo-wrapper"},[s("div",{staticClass:"logo",class:{highlight:t.totalCount>0}},[s("span",{staticClass:"uxwm-iconfont btn_shopping_normal",class:{highlight:t.totalCount>0}})]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.totalCount,expression:"totalCount"}],staticClass:"num"},[t._v(t._s(t.totalCount))])]),t._v(" "),s("div",{staticClass:"price-wrapper"},[t.totalCount?t._e():s("div",{staticClass:"desc"},[t._v("购物车为空")]),t._v(" "),t.totalCount?s("div",{staticClass:"price"},[s("div",{staticClass:"price-num"},[t._v("￥"+t._s(t.totalPrice+t.totalPack))]),t._v(" "),s("div",{staticClass:"delivery"},[t._v(t._s(t.deliveryDesc))])]):t._e()])]),t._v(" "),s("div",{staticClass:"content-right"},[t.totalPrice<t.minPrice?s("div",{staticClass:"pay",class:t.payClass},[t._v(t._s(t.payDesc))]):s("div",{staticClass:"pay",class:t.payClass,on:{click:t.gotopay}},[t._v(t._s(t.payDesc)+"\n        ")])])]),t._v(" "),s("div",{staticClass:"ball-container"},t._l(t.balls,function(e){return s("div",[s("transition",{attrs:{name:"drop"},on:{"before-enter":t.beforeDrop,enter:t.dropping,"after-enter":t.afterDrop}},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"ball.show"}],staticClass:"ball"},[s("div",{staticClass:"inner inner-hook"})])])],1)})),t._v(" "),s("transition",{attrs:{name:"fold"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.listShow,expression:"listShow"}],staticClass:"shopcart-list"},[s("div",{staticClass:"list-header"},[s("div",{staticClass:"header"},[s("h1",{staticClass:"title"},[t._v("购物车")]),t._v(" "),s("span",{staticClass:"empty uxwm-iconfont btn_delete_normal",on:{click:t.empty}},[t._v("清空")])]),t._v(" "),s("div",{staticClass:"describe"},[s("span",{staticClass:"title"},[t._v("阶梯配送费")])])]),t._v(" "),s("div",{ref:"listContent",staticClass:"list-content"},[s("ul",[t._l(t.selectFoods,function(e){return s("li",{staticClass:"food"},[s("span",{staticClass:"name"},[t._v(t._s(e.name))]),t._v(" "),s("div",{staticClass:"price-box"},[s("span",[t._v("￥"),s("span",{staticClass:"price"},[t._v(t._s(e.shopCartPrice*e.count))])])]),t._v(" "),s("div",{staticClass:"buyCart-wrapper"},[s("buyCart",{attrs:{food:e,isYingye:t.isYingye,shopcart:1},on:{add:t.addFood}})],1)])}),t._v(" "),t.totalPack?s("li",{staticClass:"food"},[s("span",{staticClass:"name"},[t._v("餐盒")]),t._v(" "),s("div",{staticClass:"price-box"},[s("span",[t._v("￥"),s("span",{staticClass:"price"},[t._v(t._s(t.totalPack))])])])]):t._e()],2)])])])],1),t._v(" "),s("transition",{attrs:{name:"fade"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.listShow,expression:"listShow"}],staticClass:"list-mask",on:{click:t.hideList}})])],1)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div")},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"shop-detail-wrap"},[s("section",{staticClass:"bg-white shop-ad"},[s("div",{staticClass:"title shop-ad-title bb"},[s("iconfont",{staticClass:"title-icon title-icon-ad",attrs:{iconname:t.icons.ad}}),t._v("商家公告")],1),t._v(" "),s("div",{staticClass:"content shop-ad-content bb"},[t._v(t._s(t.shopDetail.notice))])]),t._v(" "),s("section",{staticClass:"bg-white shop-activity"},[s("div",{staticClass:"title shop-activity-title bb"},[s("iconfont",{staticClass:"title-icon title-icon-activity",attrs:{iconname:t.icons.activity}}),t._v("优惠活动")],1),t._v(" "),s("div",{staticClass:"content shop-activity-content"},t._l(t.shopDetail.activity,function(e){return s("p",{staticClass:"shop-activity-item activity-status0"},[t._v(t._s(e.title))])}))]),t._v(" "),s("section",{staticClass:"bg-white shop-info"},[s("div",{staticClass:"title shop-info-title bb"},[s("iconfont",{staticClass:"title-icon title-icon-inf",attrs:{iconname:t.icons.info}}),t._v("商家信息")],1),t._v(" "),s("ul",[s("li",{staticClass:"bt"},[t._v("营业时间："+t._s(t.shopDetail.dispatching))]),t._v(" "),s("li",{staticClass:"bt"},[t._v("地址："+t._s(t.shopDetail.address))]),t._v(" "),s("li",{staticClass:"bt"},[t._v("电话："+t._s(t.shopDetail.phone))]),t._v(" "),t.shopDetail.invoice?s("li",{staticClass:"bt"},[s("label",{staticClass:"bill"},[t._v("商家支持开发票，请在下单时填写好发票抬头")])]):t._e()])]),t._v(" "),s("toast",{attrs:{show:t.toastShow,text:t.toastText}})],1)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"submitOrder"},[s("div",{ref:"submitOrderWrapper",staticClass:"submitOrder-wrapper"},[s("ul",[s("section",{staticClass:"address-wrapper",on:{click:t.gotoAddList}},[s("i",{staticClass:"uxwm-iconfont icon_Location"}),t._v(" "),t.addRess?s("div",{staticClass:"address-yes"},[s("p",{staticClass:"header"},[s("span",{staticClass:"name"},[t._v(t._s(t.addRess.name))]),s("span",{staticClass:"name"},[t._v(t._s(t.addRess.phoneNumber))])]),t._v(" "),s("p",{staticClass:"content"},[t._v(t._s(t.addRess.address)+t._s(t.addRess.houseNum))])]):s("div",{staticClass:"address-not"},[t._v("\n          请添加一个收货地址\n        ")]),t._v(" "),s("i",{staticClass:"uxwm-iconfont btn_right"})]),t._v(" "),s("section",{staticClass:"serviceTime-wrapper"},[s("i",{staticClass:"uxwm-iconfont icon_time"}),t._v(" "),s("span",{staticClass:"text"},[t._v("送达时间")]),t._v(" "),t.isJinKuai?s("span",{staticClass:"soon"},[t._v("尽快送达")]):t._e(),t._v(" "),t.isJinKuai?t._e():s("div",{staticClass:"time-wrapper"},[0===t.selected?s("span",{staticClass:"title"},[t._v("尽快送达")]):t._e(),t._v(" "),0===t.selected?s("span",{staticClass:"time"},[t._v("预计"+t._s(t._f("formatDate")(t.options[0])))]):t._e(),t._v(" "),t.selected>0?s("span",{staticClass:"timeItem"},[t._v(t._s(t._f("formatDate")(t.options[t.selected])))]):t._e()]),t._v(" "),t.isJinKuai?t._e():s("select",{directives:[{name:"model",rawName:"v-model",value:t.selected,expression:"selected"}],staticClass:"time-select",attrs:{placeholder:"请选择"},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.selected=e.target.multiple?s:s[0]}}},t._l(t.options,function(e,i){return s("option",{staticClass:"select-item",domProps:{value:i}},[0===i?s("span",{staticClass:"title"},[t._v("尽快送达  | ")]):t._e(),t._v(" "),0===i?s("span",{staticClass:"time"},[t._v(" 预计"+t._s(t._f("formatDate")(e)))]):t._e(),t._v(" "),i>0?s("span",[t._v(t._s(t._f("formatDate")(e)))]):t._e()])})),t._v(" "),t.isJinKuai?t._e():s("i",{staticClass:"uxwm-iconfont btn_right"})]),t._v(" "),s("section",{staticClass:"orderDetail-wrapper"},[s("div",{staticClass:"title"},[t._v("订单详情")]),t._v(" "),s("div",{staticClass:"order-list"},[s("div",{staticClass:"list-content"},[s("ul",[t._l(t.newShopCart,function(e){return e.num>0?s("li",{staticClass:"food_list_item"},[s("div",{staticClass:"name_num"},[s("span",{staticClass:"name"},[t._v(t._s(e.name)),e.specs?s("span",{staticClass:"specs"},[t._v("("+t._s(e.specs)+")")]):t._e()]),s("span",{staticClass:"num"},[t._v("×"+t._s(e.num))])]),t._v(" "),s("div",{staticClass:"price"},[t._v("￥"+t._s(t._f("toFixedFil")(e.num*e.price)))])]):t._e()}),t._v(" "),s("li",{staticClass:"food_list_item"},[t._m(0),t._v(" "),s("div",{staticClass:"price"},[t._v("￥"+t._s(t.packPrice))])]),t._v(" "),s("li",{staticClass:"food_list_item"},[t._m(1),t._v(" "),s("div",{staticClass:"price"},[t._v("￥"+t._s(t.feesPrice))])])],2)]),t._v(" "),t.isDiscount?s("div",{staticClass:"discount"},[s("div",{staticClass:"list-content"}),t._v(" "),s("p",{staticClass:"discount-title"},[t._v(t._s(t.discountList.title)+"\n              "),s("span",{staticClass:"discount-num"},[t._v("-￥"+t._s(t.discountList.reductionAmount))])])]):t._e(),t._v(" "),s("div",{staticClass:"totalPrice"},[t._v("总计："),s("span",{staticClass:"totaPrice-num"},[t._v("￥"+t._s(t._f("toFixedFil")(t.allNum)))])])])]),t._v(" "),s("section",{staticClass:"remark-wapper"},[s("router-link",{staticClass:"routerLink",attrs:{to:{path:"/remark",query:{id:"remark"}}}},[s("p",{staticClass:"remark-title"},[t._v("订单备注\n            "),s("i",{staticClass:"uxwm-iconfont btn_right"})])]),t._v(" "),t.shopInfo.invoice?s("router-link",{staticClass:"routerLink",attrs:{to:{path:"/invoice",query:{id:"invoice"}}}},[s("p",{staticClass:"invoicetitle"},[t._v("发票抬头\n            "),s("i",{staticClass:"uxwm-iconfont btn_right"})])]):t._e()],1)])]),t._v(" "),s("div",{staticClass:"submitOrder-btn"},[s("div",{staticClass:"price"},[t._v("待支付￥"+t._s(t._f("toFixedFil")(t.allPrice+t.feesPrice)))]),t._v(" "),s("div",{staticClass:"submit-btn",on:{click:t.submitOrder}},[t._v("确认下单")])]),t._v(" "),s("toast",{attrs:{show:t.toastShow,text:t.toastText}})],1)},staticRenderFns:[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"name_num"},[s("span",{staticClass:"name"},[t._v("餐盒费")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"name_num"},[s("span",{staticClass:"name"},[t._v("配送费")])])}]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"toast"},[s("div",{staticClass:"toast-mask"}),t._v(" "),s("div",{staticClass:"toast-text"},[t._v(t._s(t.text))])])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"invice"},[s("div",{staticClass:"invice-wrapper"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.isInvice,expression:"isInvice"}],staticClass:"inviceText",attrs:{type:"text",placeholder:"个人或公司全称"},domProps:{value:t.isInvice},on:{input:function(e){e.target.composing||(t.isInvice=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"invice-submit"},[s("div",{staticClass:"submitBtn",class:{active:t.isInvice.length>0},on:{click:t.gotoSubmitOrder}},[t._v("确定\n    ")])])])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"index"},[s("div",{staticClass:"header"},[s("vheade",{attrs:{seller:t.shopDetail,detail:t.detail}})],1),t._v(" "),t._m(0),t._v(" "),s("div",{staticClass:"main"},[s("goods",{attrs:{seller:t.shopDetail,"min-price":0}})],1),t._v(" "),s("toast",{attrs:{show:t.toastShow,text:t.toastText}})],1)},staticRenderFns:[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"tab"},[s("div",{staticClass:"tab-item"},[s("span",{staticClass:"label"},[t._v("商品")])])])}]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"goods"},[s("div",{ref:"menuWrapper",staticClass:"menu-wrapper"},[s("ul",t._l(t.goods,function(e,i){return s("li",{staticClass:"menu-item",class:{current:t.currentIndex===i},on:{click:function(e){t.selectMenu(i,e)}}},[s("span",{staticClass:"text"},[t._v(t._s(e.dishTypeName))]),t._v(" "),t.categoryNum[i]?s("span",{staticClass:"category_num"},[t._v(t._s(t.categoryNum[i]))]):t._e()])}))]),t._v(" "),s("div",{ref:"foodsWrapper",staticClass:"foods-wrapper"},[s("ul",t._l(t.goods,function(e,i){return s("li",{ref:"foodList",refInFor:!0,staticClass:"food-list"},[s("h1",{staticClass:"food-title"},[s("span",{staticClass:"name"},[t._v(t._s(e.dishTypeName))]),s("span",{staticClass:"desc"},[t._v(t._s(e.dishTypeDescription))])]),t._v(" "),s("ul",t._l(e.dishList,function(e,a){return s("li",{key:a,staticClass:"food-item"},[s("div",{staticClass:"icon"},[s("img",{attrs:{src:e.imageUrl,width:"52px",height:"52px"}})]),t._v(" "),s("div",{staticClass:"content"},[s("h2",{staticClass:"name"},[t._v(t._s(e.name))]),t._v(" "),s("span",{staticClass:"desc"},[t._v(t._s(e.description))]),t._v(" "),e.dishSpecification[0].saleCount?s("p",{staticClass:"sellNum"},[t._v("\n                已售"+t._s(e.dishSpecification[0].saleCount)+"份")]):t._e(),t._v(" "),s("div",{staticClass:"price-wrapper"},[s("div",{staticClass:"price"},[t._v("￥"),s("span",{staticClass:"price-num"},[t._v(t._s(e.dishSpecification[0].dishPrice))]),e.dishSpecification.length>1?s("span",{staticClass:"text"},[t._v("起")]):t._e()]),t._v(" "),s("buyCart",{ref:"buyCart",refInFor:!0,attrs:{shopId:t.shopId,foods:e,isYingye:t.isYingye,index:i},on:{add:t.addFood,showSpecs:t.showSpecsFun}})],1)])])}))])}))]),t._v(" "),t.isYingye?s("div",{staticClass:"shopcart_module"},[s("div",{staticClass:"shopcart"},[s("div",{staticClass:"content",on:{click:t.toggleCartList}},[s("div",{staticClass:"content-left"},[s("div",{staticClass:"logo-wrapper"},[s("div",{staticClass:"logo",class:{highlight:t.totalNum>0}},[s("span",{staticClass:"uxwm-iconfont btn_shopping_normal",class:{highlight:t.totalNum>0}})]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.totalNum,expression:"totalNum"}],staticClass:"num"},[t._v(t._s(t.totalNum))])]),t._v(" "),s("div",{staticClass:"price-wrapper"},[t.totalNum?t._e():s("div",{staticClass:"desc"},[t._v("购物车为空")]),t._v(" "),t.totalNum?s("div",{staticClass:"price"},[s("div",{staticClass:"price-num"},[t._v("￥"+t._s(t._f("toFixedFil")(t.allPrice)))]),t._v(" "),s("div",{staticClass:"delivery"},[t._v(t._s(t.deliveryDesc))])]):t._e()])]),t._v(" "),s("div",{staticClass:"content-right"},[t.allPrice>t.minPrice&&t.allPrice>0?s("div",{staticClass:"pay",class:t.payClass,on:{click:t.gotopay}},[t._v(t._s(t.payDesc)+"\n          ")]):s("div",{staticClass:"pay",class:t.payClass},[t._v(t._s(t.payDesc))])])]),t._v(" "),s("div",{staticClass:"ball-container"},t._l(t.balls,function(e){return s("div",[s("transition",{attrs:{name:"drop"},on:{"before-enter":t.beforeDrop,enter:t.dropping,"after-enter":t.afterDrop}},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"ball.show"}],staticClass:"ball"},[s("div",{staticClass:"inner inner-hook"})])])],1)})),t._v(" "),s("transition",{attrs:{name:"fold"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.listShow,expression:"listShow"}],staticClass:"shopcart-list"},[s("div",{staticClass:"list-header"},[s("div",{staticClass:"header"},[s("h1",{staticClass:"title"},[t._v("购物车")]),t._v(" "),s("span",{staticClass:"empty uxwm-iconfont btn_delete_normal",on:{click:t.clearCart}},[t._v("清空")])]),t._v(" "),t.seller.dispatching.fees?s("div",{staticClass:"describe"},[s("span",{staticClass:"title"},[t._v("阶梯配送费")]),t._v(" "),t._l(t.seller.dispatching.fees,function(e){return s("span",{staticClass:"text"},[t._v("满"+t._s(e.price)+"元 运费"+t._s(e.fee)+"。")])})],2):t._e()]),t._v(" "),s("div",{ref:"listContent",staticClass:"list-content"},[s("ul",[t._l(t.cartFoodList,function(e,i){return e.num>0?s("li",{key:i,staticClass:"food"},[s("span",{staticClass:"name"},[t._v(t._s(e.name))]),t._v(" "),e.specs?s("span",{staticClass:"specs"},[t._v("("+t._s(e.specs)+")")]):t._e(),t._v(" "),s("div",{staticClass:"price-box"},[s("span",[t._v("￥"),s("span",{staticClass:"price"},[t._v(t._s(t._f("toFixedFil")(e.price*e.num)))])])]),t._v(" "),s("div",{staticClass:"buyCart-wrapper"},[s("div",{staticClass:"cart-decrease inner uxwm-iconfont btn_reduce_normal",on:{click:function(s){s.stopPropagation(),s.preventDefault(),t.removeOutCart(e.category_id,e.item_id,e.food_id,e.name,e.price,e.specs,e.packingFee)}}}),t._v(" "),s("div",{staticClass:"cart-count"},[t._v(t._s(e.num))]),t._v(" "),s("div",{staticClass:"cart-add uxwm-iconfont btn_add_disabled",on:{click:function(s){s.stopPropagation(),s.preventDefault(),t.addToCart(e.category_id,e.item_id,e.food_id,e.name,e.price,e.specs,e.packingFee)}}})])]):t._e()}),t._v(" "),t.totalPack?s("li",{staticClass:"food"},[s("span",{staticClass:"name"},[t._v("餐盒")]),t._v(" "),s("div",{staticClass:"price-box"},[s("span",[t._v("￥"),s("span",{staticClass:"price"},[t._v(t._s(t.totalPack))])])])]):t._e()],2)])])])],1),t._v(" "),s("transition",{attrs:{name:"fade"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.listShow,expression:"listShow"}],staticClass:"list-mask",on:{click:t.hideList}})])],1):s("div",{staticClass:"closeSeller"},[t._v("\n    商家休息中，暂不接单\n  ")]),t._v(" "),s("transition",{attrs:{name:"fade"}},[t.showSpecs?s("div",{staticClass:"shop-cover",on:{click:t.closeSpesc}}):t._e()]),t._v(" "),s("section",[s("transition",{attrs:{name:"specs"}},[t.showSpecs?s("div",{staticClass:"specs-wrapper"},[s("i",{staticClass:"close uxwm-iconfont btn_close_normal",on:{click:t.closeSpesc}}),t._v(" "),s("h2",{staticClass:"specs-title"},[t._v(t._s(t.specs.name))]),t._v(" "),s("div",{staticClass:"specs-content"},[s("p",{staticClass:"text"},[t._v("规格")]),t._v(" "),s("div",{staticClass:"content"},t._l(t.specs.dishSpecification,function(e,i){return s("span",{staticClass:"specs-item",class:{normal:i===t.specsIndex},on:{click:function(e){t.selectSpecs(i)}}},[t._v(t._s(e.specificationName))])}))]),t._v(" "),s("div",{staticClass:"specs-price"},[s("div",{staticClass:"price-box"},[t._v("￥"),s("span",{staticClass:"text"},[t._v(t._s(t.specs.dishSpecification[t.specsIndex].dishPrice))])]),t._v(" "),s("div",{staticClass:"submit",on:{click:function(e){e.stopPropagation(),e.preventDefault(),t.addSpecs(t.specs.dishTypeRelations[0],t.specs.dishId,t.specs.dishSpecification[t.specsIndex].specificationId,t.specs.name,t.specs.dishSpecification[t.specsIndex].dishPrice,t.specs.dishSpecification[t.specsIndex].specificationName,t.specs.dishSpecification[t.specsIndex].packPrice)}}},[t._v("\n            选好了\n          ")])])]):t._e()])],1),t._v(" "),t.isToastText?s("div",{staticClass:"toast"},[s("p",{staticClass:"text"},[t._v(t._s(t.toastText))]),t._v(" "),t._m(0)]):t._e()],1)},staticRenderFns:[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("p",{staticClass:"btn"},[s("span",{staticClass:"yes"},[t._v("确认")]),s("span",{staticClass:"no"},[t._v("取消")])])}]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"buyCart"},[1===t.foods.dishSpecification.length&&1===t.foods.state?s("section",{key:"cart-wrapper",staticClass:"cart-wrapper"},[s("transition",{attrs:{name:"move"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.foodNum>0,expression:"foodNum > 0"}],staticClass:"cart-decrease",on:{click:function(e){e.stopPropagation(),e.preventDefault(),t.removeOutCart(t.foods.dishTypeRelations[0],t.foods.dishId,t.foods.dishSpecification[0].specificationId,t.foods.name,t.foods.dishSpecification[0].dishPrice,t.foods.dishSpecification[0].specificationName,t.foods.dishSpecification[0].packPrice)}}},[s("span",{staticClass:"inner uxwm-iconfont btn_reduce_normal"})])]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.foodNum>0,expression:"foodNum>0"}],staticClass:"cart-count"},[t._v(t._s(t.foodNum))]),t._v(" "),s("div",{staticClass:"cart-add uxwm-iconfont btn_add_disabled",class:{forbid:!t.isYingye},on:{click:function(e){e.stopPropagation(),e.preventDefault(),t.addToCart(t.foods.dishTypeRelations[0],t.foods.dishId,t.foods.dishSpecification[0].specificationId,t.foods.name,t.foods.dishSpecification[0].dishPrice,"",t.foods.dishSpecification[0].packPrice)}}})],1):t.foods.dishSpecification.length>1&&1===t.foods.state?s("section",{key:"specification-wrapper",staticClass:"specification-wrapper"},[s("transition",{attrs:{name:"move"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.foodNum>0,expression:"foodNum > 0"}],staticClass:"cart-decrease uxwm-iconfont sanjiao",class:{specification_delete:t.foods.dishSpecification.length>1},on:{click:function(e){e.stopPropagation(),e.preventDefault(),t.showReduceTip(e)}}},[s("span",{staticClass:"inner uxwm-iconfont btn_reduce_normal sanjiao"}),t._v(" "),s("transition",{attrs:{name:"fade"}},[t.showDeleteTip?s("p",{staticClass:"show_delete_tip"},[t._v("多规格商品只能去购物车删除哦")]):t._e()])],1)]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.foodNum>0,expression:"foodNum > 0"}],staticClass:"cart-count"},[t._v(t._s(t.foodNum))]),t._v(" "),s("div",{staticClass:"cart-add uxwm-iconfont btn_add_disabled",class:{forbid:!t.isYingye},on:{click:function(e){e.stopPropagation(),e.preventDefault(),t.showChooseList(e,t.foods)}}})],1):s("section",{key:"sellout-wrapper"},[s("div",{staticClass:"sellout"},[t._v("已售完")])])])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{ref:"header",staticClass:"header"},[s("router-link",{staticClass:"content-wrapper",attrs:{tag:"div",to:{path:"/shopDetail",query:{shopId:t.shopId}}},on:{click:function(e){e.stopPropagation(),t.goSeller(e)}}},[s("div",{staticClass:"box-content"},[s("div",{staticClass:"logo"},[s("img",{attrs:{src:t.seller.logo,alt:"",width:"48px",height:"48px"}})]),t._v(" "),s("div",{staticClass:"content"},[s("div",{staticClass:"title-name"},[t._v(t._s(t.seller.name))]),t._v(" "),s("div",{staticClass:"description"}),t._v(" "),t.seller.notice?s("div",{staticClass:"bulletin"},[t._v("公告："+t._s(t.seller.notice))]):t._e()]),t._v(" "),s("div",{staticClass:"enter uxwm-iconfont btn_right"})]),t._v(" "),s("div",{staticClass:"activity"})]),t._v(" "),s("div",{staticClass:"user"},[s("div",{staticClass:"user-btn",on:{click:t.goUser}},[t._v("我的订单")])]),t._v(" "),s("div",{staticClass:"background"},[s("img",{attrs:{src:t.seller.logo,alt:"",width:"100%",height:"100%"}})])],1)])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("i",{staticClass:"uxwm-iconfont",class:t.iconname})},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"submitPay"},[s("div",{staticClass:"time-wrapper"},[s("p",{staticClass:"timeTitle"},[t._v("支付剩余时间")]),t._v(" "),s("count-down",{staticClass:"timeNum",attrs:{currentTime:t.currentTime,startTime:t.currentTime,endTime:t.endTime},on:{end_callback:t.countDownFun}}),t._v(" "),s("p",{staticClass:"timeText"},[s("span",{staticClass:"text"},[t._v("详情")]),t._v(" "),s("span",{staticClass:"price"},[t._v("￥"+t._s(t.paidPrice))])])],1),t._v(" "),t._m(0),t._v(" "),s("div",{staticClass:"submit-wrapper",on:{click:t.weChatPay}},[s("div",{staticClass:"submitBtn"},[t._v("确认支付￥"+t._s(t.paidPrice))])]),t._v(" "),t._m(1),t._v(" "),s("toast",{attrs:{show:t.toastShow,text:t.toastText}})],1)},staticRenderFns:[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"payPattern-wrapper"},[s("p",{staticClass:"payPattern-tiele"},[t._v("选择支付方式")]),t._v(" "),s("p",{staticClass:"payPattern"},[s("i",{staticClass:"uxwm-iconfont icon_wechat_normal"}),t._v(" "),s("span",{staticClass:"text"},[t._v("微信支付")]),t._v(" "),s("i",{staticClass:"uxwm-iconfont btn_right_normal"})])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"image-wrapper"},[s("div",{staticClass:"image"})])}]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"address-wrap"},[s("ul",{staticClass:"bg-white"},[s("li",[s("div",{staticClass:"left"},[t._v("联系人")]),t._v(" "),s("div",{staticClass:"right"},[s("p",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.addressDetail.name,expression:"addressDetail.name"}],attrs:{type:"text",placeholder:"收货人姓名"},domProps:{value:t.addressDetail.name},on:{input:function(e){e.target.composing||(t.addressDetail.name=e.target.value)}}})]),t._v(" "),s("p",{staticClass:"gender-wrap"},[s("label",{staticClass:"gender",class:1===t.addressDetail.gender?"on":"off",on:{click:function(e){t.addressDetail.gender=1}}},[t._v("先生")]),t._v(" "),s("label",{staticClass:"gender",class:2===t.addressDetail.gender?"on":"off",on:{click:function(e){t.addressDetail.gender=2}}},[t._v("女士")])])])]),t._v(" "),s("li",[s("div",{staticClass:"left"},[t._v("电话")]),t._v(" "),s("div",{staticClass:"right"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.addressDetail.phoneNumber,expression:"addressDetail.phoneNumber"}],attrs:{type:"tel",placeholder:"收货人电话"},domProps:{value:t.addressDetail.phoneNumber},on:{input:function(e){e.target.composing||(t.addressDetail.phoneNumber=e.target.value)}}})])]),t._v(" "),s("li",[s("div",{staticClass:"left"},[t._v("地址")]),t._v(" "),s("div",{staticClass:"right"},[s("p",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.addressDetail.address,expression:"addressDetail.address"}],attrs:{type:"text",placeholder:"小区/写字楼/学校等"},domProps:{value:t.addressDetail.address},on:{input:function(e){e.target.composing||(t.addressDetail.address=e.target.value)}}})]),t._v(" "),s("p",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.addressDetail.houseNum,expression:"addressDetail.houseNum"}],attrs:{type:"text",placeholder:"详细地址（如门牌号等）"},domProps:{value:t.addressDetail.houseNum},on:{input:function(e){e.target.composing||(t.addressDetail.houseNum=e.target.value);
}}})])])])]),t._v(" "),s("div",{staticClass:"btns"},[s("button",{staticClass:"btn-del",class:t.addressId?"on":"off",attrs:{type:"button"},on:{click:function(e){t.delAdderss()}}},[t._v("删除地址")]),t._v(" "),s("button",{staticClass:"btn-save",class:t.vaild.name&&t.vaild.phoneNumber&&t.vaild.address?"on":"off",attrs:{type:"button"},on:{click:t.saveAddress}},[t._v("\n      保存地址\n    ")])]),t._v(" "),s("toast",{attrs:{show:t.toastShow,text:t.toastText}})],1)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div")},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"addlist-wrap"},[t._l(t.withinRange,function(e){return s("section",{staticClass:"addlist"},[s("div",{staticClass:"bg-white add add-available"},[s("div",{staticClass:"add-inf",class:e.addressId===t.nowSelADDId?"on":"off",on:{click:function(s){t.selectAdd(e.addressId)}}},[s("p",{staticClass:"name-and-phone"},[t._v(t._s(e.name)+" "+t._s(1===e.gender?"先生":2===e.gender?"女士":"")),s("span",[t._v(t._s(e.phoneNumber))])]),t._v(" "),s("p",[t._v(t._s(e.houseNum)+" "+t._s(e.adress))])]),t._v(" "),s("div",{staticClass:"add-edit",on:{click:function(s){t.addNew(e.addressId)}}})])])}),t._v(" "),s("p",{directives:[{name:"show",rawName:"v-show",value:t.outofRange.length>0,expression:"outofRange.length > 0"}],staticClass:"add-un-tip"},[t._v("以下地址超出配送范围")]),t._v(" "),t._l(t.outofRange,function(e){return s("section",{staticClass:"addlist"},[s("div",{staticClass:"bg-white add add-unusable"},[s("div",{staticClass:"add-inf"},[s("p",{staticClass:"name-and-phone"},[t._v(t._s(e.name)+" "+t._s(1===e.gender?"先生":2===e.gender?"女士":"")),s("span",[t._v(t._s(e.phoneNumber))])]),t._v(" "),s("p",[t._v(t._s(e.houseNum)+" "+t._s(e.adress))])]),t._v(" "),s("div",{staticClass:"add-edit",on:{click:function(s){t.addNew(e.addressId)}}})])])}),t._v(" "),s("div",{staticClass:"bg-white add-new",on:{click:function(e){t.addNew("")}}},[s("iconfont",{attrs:{iconname:t.icon.new}}),t._v("\n    新增收货地址\n  ")],1)],2)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"order-detail-wrap"},[s("section",{staticClass:"bg-white order-status"},[s("div",{staticClass:"order-status-icon",class:t.iconCodeArr[t.orderStatus.iconCode]}),t._v(" "),0===t.orderStatus.iconCode||6===t.orderStatus.iconCode?s("p",{staticClass:"order-status-tip"},[t._v("\n      "+t._s(t.orderStatus.tip))]):t._e(),t._v(" "),s("p",{staticClass:"order-status-txt"},[t._v(t._s(t.orderStatusTipArr[t.orderStatus.iconCode]))]),t._v(" "),0===t.orderStatus.iconCode?s("button",{staticClass:"btn-to-pay",attrs:{type:"button"},on:{click:function(e){t.toPay()}}},[t._v("去支付")]):t._e()]),t._v(" "),s("section",{staticClass:"bg-white order-foods"},[s("ul",[s("li",{staticClass:"title"},[t._v("订单详情")]),t._v(" "),t._l(t.orderDetail.dishes,function(e){return s("li",[t._v("\n        "+t._s(e.dishName)+t._s(e.dishType)+"\n        "),s("label",[s("span",{directives:[{name:"show",rawName:"v-show",value:e.dishCount>1,expression:"item.dishCount > 1"}]},[t._v("x"+t._s(e.dishCount))]),t._v(" "),s("span",{staticClass:"amount"},[t._v("￥"+t._s(e.dishPrice))])])])}),t._v(" "),s("li",[t._v("\n        餐盒费\n        "),s("label",[s("span",{staticClass:"amount"},[t._v("￥"+t._s(t.orderDetail.packPrice))])])]),t._v(" "),s("li",[t._v("\n        配送费\n        "),s("label",[s("span",{staticClass:"amount"},[t._v("￥"+t._s(t.orderDetail.dispatchPrice))])])]),t._v(" "),s("li",[s("div",{staticClass:"discoount"},[t._v("满减优惠")]),t._v(" "),s("label",[s("span",{staticClass:"discount-amount"},[t._v("-￥"+t._s(t.orderDetail.discountPrice))])])]),t._v(" "),s("li",{staticClass:"total-amount"},[t._v("\n        总计："),s("span",[t._v("￥"+t._s(t.orderDetail.payPrice))])])],2)]),t._v(" "),s("section",{staticClass:"bg-white others"},[s("ul",[s("li",{staticClass:"title"},[t._v("其他")]),t._v(" "),s("li",{directives:[{name:"show",rawName:"v-show",value:""!==t.orderDetail.remark,expression:"orderDetail.remark !== ''"}]},[t._v("订单备注："+t._s(t.orderDetail.remark))]),t._v(" "),s("li",{directives:[{name:"show",rawName:"v-show",value:""!==t.orderDetail.invoiceTitle,expression:"orderDetail.invoiceTitle !== ''"}]},[t._v("发票抬头："+t._s(t.orderDetail.invoiceTitle))])])]),t._v(" "),s("section",{staticClass:"bg-white send"},[s("ul",[s("li",{staticClass:"title"},[t._v("配送信息")]),t._v(" "),s("li",[t._v("送达时间："+t._s(t.orderDetail.expectedFinish))]),t._v(" "),s("li",[t._v("联系人："+t._s(t.orderDetail.receiverName)+" "+t._s(1===t.orderDetail.gender?"先生":2===t.orderDetail.gender?"女士":"")+"\n      ")]),t._v(" "),s("li",[t._v("电话："+t._s(t.orderDetail.phoneNumber))]),t._v(" "),s("li",[t._v("地址："+t._s(t.orderDetail.address))]),t._v(" "),4===t.orderStatus.iconCode||5===t.orderStatus.iconCode?s("li",[t._v("配送方式：蜂鸟专送")]):t._e(),t._v(" "),4===t.orderStatus.iconCode||5===t.orderStatus.iconCode?s("li",[t._v("配送骑手："+t._s(t.orderDetail.dmName)+" "),s("span",{on:{click:function(e){t.callPhone(t.orderDetail.dmPhone)}}},[t._v(t._s(t.orderDetail.dmPhone))])]):t._e()])]),t._v(" "),s("section",{staticClass:"bg-white order-info"},[s("ul",[s("li",{staticClass:"title"},[t._v("订单信息")]),t._v(" "),s("li",[t._v("订单号："+t._s(t.orderDetail.orderNo))]),t._v(" "),0!==t.orderStatus.iconCode?s("li",[t._v("支付方式：在线支付")]):t._e(),t._v(" "),s("li",[t._v("下单时间："+t._s(t.orderDetail.orderTime))])])]),t._v(" "),s("section",{staticClass:"bg-white phone"},[s("ul",{on:{click:function(e){t.callPhone(t.orderDetail.shopPhone)}}},[s("li",[t._v("\n        联系商家\n        "),s("label",[s("iconfont",{attrs:{iconname:t.icon.phone}})],1)])])]),t._v(" "),s("toast",{attrs:{show:t.toastShow,text:t.toastText},on:{closeToast:t.doCloseToast}})],1)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"orderlist-wrap",attrs:{id:"orderlist"}},[s("div",{attrs:{id:"orderlist_scroll"}},[s("ul",t._l(t.orderList,function(e){return s("li",{staticClass:"bg-white",on:{click:function(s){t.viewDetail(e.orderNo,e.id)}}},[s("p",{staticClass:"bb"},[t._v("\n          "+t._s(e.orderTime)+"\n          "),t._v(" "),s("span",{class:"order-status"+e.state},[t._v(t._s(e.stateMsgC))])]),t._v(" "),s("p",[t._v("￥"+t._s(e.payPrice))])])})),t._v(" "),s("p",{staticClass:"data-status"},[t._v(t._s(t.dataStatus))])]),t._v(" "),s("toast",{attrs:{show:t.toastShow,text:t.toastText}})],1)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"remark"},[s("section",{staticClass:"orderRemark"},[s("div",{staticClass:"orderTitle"},[t._v("\n      订单备注\n    ")]),t._v(" "),s("div",{staticClass:"orderContent"},[s("div",{staticClass:"acquiesce"},t._l(t.initremark,function(e,i){return s("span",{staticClass:"acquiesce-orderItem",class:{selectClass:i===t.remarkIndex},on:{click:function(e){t.selectRemark(i)}}},[t._v(t._s(e)+"\n        ")])}))])]),t._v(" "),s("section",{staticClass:"elseRemark"},[s("div",{staticClass:"elseTitle"},[t._v("\n      其他备注\n    ")]),t._v(" "),s("div",{staticClass:"elseContent"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.elseText,expression:"elseText"}],staticClass:"elseText",attrs:{maxlength:"50",cols:"50",rows:"3",placeholder:"请输入备注内容（可不填）"},domProps:{value:t.elseText},on:{input:function(e){e.target.composing||(t.elseText=e.target.value)}}}),t._v(" "),s("div",{staticClass:"length"},[s("span",{staticClass:"lengthNum"},[t._v(t._s(t.elseText.length))]),t._v("/50")])])]),t._v(" "),s("div",{staticClass:"submit"},[s("div",{staticClass:"submitBtn",on:{click:t.goSubmitOrder}},[t._v("确定")])])])},staticRenderFns:[]}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e){"use strict";function s(t,e){if(/(y+)/.test(e)){e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length));var s={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds()};for(var a in s)if(new RegExp("("+a+")").test(e)){var o=s[a]+"";e=e.replace(RegExp.$1,1===RegExp.$1.length?o:i(o))}}return e.split(" ")[1]}function i(t){return("00"+t).substr(t.length)}Object.defineProperty(e,"__esModule",{value:!0}),e.formatDate=s},function(t,e,s){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function a(t,e,s){var i=window.localStorage.__uxwm__;i?(console.log(2),i=JSON.parse(i),i[t]||(i[t]={})):(console.log(1),i={},i[t]={}),i[t][e]=s,window.localStorage.__uxwm__=(0,r.default)(i)}function o(t,e,s){var i=window.localStorage.__uxwm__;if(!i)return s;if(i=JSON.parse(i)[t],!i)return s;var a=i[e];return a||s}Object.defineProperty(e,"__esModule",{value:!0});var n=s(33),r=i(n);e.saveToLocal=a,e.loadFromLocal=o},function(t,e){"use strict";function s(){return console.log(1),1}function i(t){for(var e=0;e<t.length;e++)for(var s=e;s<t.length;s++)if(t[e].price>t[s].price){var i=t[e];t[e]=t[s],t[s]=i}return t}function a(t){return 0===t?"免配送费":"配送费"+t+"元"}Object.defineProperty(e,"__esModule",{value:!0}),e.test=s,e.bubbleSort=i,e.fees=a},function(t,e,s){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var a=s(80),o=i(a);o.default.mock("/api/test",{"province|2-4":{110000:"北京市",120000:"天津市",130000:"河北省",140000:"山西省"}}),t.exports=o.default},function(t,e,s){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=s(25),o=i(a),n=s(141),r=i(n);o.default.use(r.default),e.default=new r.default({scrollBehavior:function(){return{y:0}},mode:"hash",routes:[{path:"/",redirect:"/jingmo"},{path:"/jingmo",component:s(115)},{path:"/jingmo1",component:s(116)},{path:"/zhengchang",component:s(117)},{path:"/zhengchang1",component:s(118)},{path:"/index",component:s(103)},{path:"/orderList",component:s(113)},{path:"/orderDetail",component:s(112)},{path:"/addList",component:s(110)},{path:"/addNew",component:s(111)},{path:"/shopDetail",component:s(114)},{path:"/submitOrder",component:s(107)},{path:"/remark",component:s(106)},{path:"/invoice",component:s(105)},{path:"/submitPay",component:s(109)}]})},function(t,e,s){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e.default=t,e}Object.defineProperty(e,"__esModule",{value:!0}),e.setStatus=void 0;var a=s(58),o=i(a);e.setStatus=function(t,e){var s=t.commit;s(o.SET_STATUS,e)}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={}},function(t,e,s){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=s(25),o=i(a),n=s(5),r=i(n),c=s(198),d=i(c),l=s(195),u=i(l),h=s(196),p=i(h);o.default.use(r.default);var f={latitude:"",longitude:"",cartList:{},shopDetail:null,userInfo:null,shopID:null,remarkText:"",indexRemark:null,inputText:"",invoice:"",searchAddress:null,geohash:null,choosedAddress:null,addressIndex:null,needValidation:null,cartId:null,sig:null,orderParam:null,orderMessage:null,orderDetail:null,login:!0,totalPack:null,feesPrice:null,allPrice:null,userAddressId:""};e.default=new r.default.Store({state:f,getters:p.default,actions:u.default,mutations:d.default})},function(t,e,s){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a,o=s(189),n=i(o),r=s(16),c=i(r),d=s(58),l=s(8);e.default=(a={},(0,n.default)(a,d.ADD_CART,function(t,e){var s=e.shopid,i=e.categoryId,a=e.itemId,o=e.foodId,n=e.name,r=e.price,d=e.specs,u=e.packingFee,h=t.cartList;h[s]&&h[s][i]&&h[s][i][a]&&h[s][i][a][o]?h[s][i][a][o].num++:h[s]&&h[s][i]&&h[s][i][a]?(h[s][i][a][o]={},h[s][i][a][o].num=1,h[s][i][a][o].id=o,h[s][i][a][o].name=n,h[s][i][a][o].price=r,h[s][i][a][o].specs=d,h[s][i][a][o].packingFee=u):h[s]&&h[s][i]?(h[s][i][a]={},h[s][i][a][o]={},h[s][i][a][o].num=1,h[s][i][a][o].id=o,h[s][i][a][o].name=n,h[s][i][a][o].price=r,h[s][i][a][o].specs=d,h[s][i][a][o].packingFee=u):h[s]?(h[s][i]={},h[s][i][a]={},h[s][i][a][o]={},h[s][i][a][o].num=1,h[s][i][a][o].id=o,h[s][i][a][o].name=n,h[s][i][a][o].price=r,h[s][i][a][o].specs=d,h[s][i][a][o].packingFee=u):(h[s]={},h[s][i]={},h[s][i][a]={},h[s][i][a][o]={},h[s][i][a][o].num=1,h[s][i][a][o].id=o,h[s][i][a][o].name=n,h[s][i][a][o].price=r,h[s][i][a][o].specs=d,h[s][i][a][o].packingFee=u),t.cartList=(0,c.default)({},h),(0,l.setStore)("buyCart",t.cartList)}),(0,n.default)(a,d.REDUCE_CART,function(t,e){var s=e.shopid,i=e.categoryId,a=e.itemId,o=e.foodId,n=(e.name,e.price,e.specs,t.cartList);n[s]&&n[s][i]&&n[s][i][a]&&n[s][i][a][o]&&(n[s][i][a][o].num>0?(n[s][i][a][o].num--,t.cartList=(0,c.default)({},n),(0,l.setStore)("buyCart",t.cartList)):n[s][i][a][o]=null)}),(0,n.default)(a,d.INIT_BUYCART,function(t){var e=(0,l.getStore)("buyCart");e&&(t.cartList=JSON.parse(e))}),(0,n.default)(a,d.CLEAR_CART,function(t,e){t.cartList[e]=null,t.cartList=(0,c.default)({},t.cartList),(0,l.setStore)("buyCart",t.cartList)}),(0,n.default)(a,d.INIT_BUYCART,function(t){var e=(0,l.getStore)("buyCart");e&&(t.cartList=e)}),(0,n.default)(a,d.SAVE_SHOPID,function(t,e,s){t.shopid=e,t.customerid=s}),(0,n.default)(a,d.CHOOSE_ADDRESS,function(t,e){var s=e.address,i=e.index;t.choosedAddress=s,t.addressIndex=i}),(0,n.default)(a,d.USER_PRICE,function(t,e){var s=e.totalPack,i=e.feesPrice,a=e.allPrice;t.totalPack=s,t.feesPrice=i,t.allPrice=a}),(0,n.default)(a,d.CONFIRM_REMARK,function(t,e){var s=e.remarkText,i=e.inputText,a=e.indexRemark;t.remarkText=s,t.inputText=i,t.indexRemark=a}),(0,n.default)(a,d.CONFIRM_INVOICE,function(t,e){t.invoice=e}),(0,n.default)(a,d.USER_ADDRESSID,function(t,e){t.userAddressId=e}),(0,n.default)(a,d.RECORD_USERINFO,function(t,e,s){t.userInfo=s,t.shopID=e}),a)},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={}},function(t,e,s){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=s(57),o=i(a),n=s(16),r=i(n),c=s(7),d=i(c),l=s(5);e.default={props:{foods:{type:Object},index:{type:Number},shopId:{type:String},shopcart:{type:Number},isYingye:{type:Boolean}},data:function(){return{showSpecs:!1,showDeleteTip:!1}},created:function(){},computed:(0,d.default)({},(0,l.mapState)(["cartList"]),{shopCart:function(){return(0,r.default)({},this.cartList[this.shopId])},foodNum:function(){var t=this.foods.dishTypeRelations[0],e=this.foods.dishId;if(this.shopCart&&this.shopCart[t]&&this.shopCart[t][e]){var s=0;return(0,o.default)(this.shopCart[t][e]).forEach(function(t,e){s+=t.num}),s}return 0}}),methods:(0,d.default)({},(0,l.mapMutations)(["ADD_CART","REDUCE_CART"]),{addToCart:function(t,e,s,i,a,o,n){this.ADD_CART({shopid:this.shopId,categoryId:t,itemId:e,foodId:s,name:i,price:a,specs:o,packingFee:n})},removeOutCart:function(t,e,s,i,a,o,n){this.foodNum>0&&this.REDUCE_CART({shopid:this.shopId,categoryId:t,itemId:e,foodId:s,name:i,price:a,specs:o,packingFee:n})},showChooseList:function(t,e){this.isYingye&&this.$emit("showSpecs",t,e,this.showSpecs)},showReduceTip:function(){var t=this;this.showDeleteTip=!0,clearTimeout(this.timer),this.timer=setTimeout(function(){clearTimeout(t.timer),t.showDeleteTip=!1},1500)}})}},function(t,e,s){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=s(56),o=i(a),n=s(35),r=i(n),c=s(34),d=i(c),l=s(16),u=i(l),h=s(7),p=i(h),f=s(5),v=s(36),m=i(v),_=s(104),g=i(_),C=s(43),I=i(C),w=s(8),x=!0;e.default={props:{seller:{type:Object},minPrice:{type:Number}},data:function(){return{balls:[{show:!1},{show:!1},{show:!1},{show:!1},{show:!1}],dropBalls:[],goods:[],specs:{},falg:"",isYingye:!1,listHeight:[],scrollY:0,selectedFood:{},showSpecs:!1,specsIndex:0,shopId:"",customerId:"",categoryNum:[],totalPrice:0,cartFoodList:[],showCartList:!1,totalPack:0,allPrice:0,toastText:"清空购物车",isToastText:0}},created:function(){var t=this;this.shopId=(0,w.getStore)("user").shopId,this.customerId=(0,w.getStore)("user").customerId,this.INIT_BUYCART();var e={shopId:this.shopId,customerId:this.customerId};this.axios.get("/br/dish/list"+this.PublicJs.createParams(e)).then(function(e){e=e.data,e.success===x&&(t.goods=e.data.dishesList,t.$nextTick(function(){t.initCategoryNum(),t._initScroll(),t._calculateHeight()}))}),this.getShopState()},computed:(0,p.default)({},(0,f.mapState)(["cartList"]),{shopCartList:function(){return(0,u.default)({},this.cartList[this.shopId])},currentIndex:function(){for(var t=0;t<this.listHeight.length;t++){var e=this.listHeight[t],s=this.listHeight[t+1];if(!s||this.scrollY>=e&&this.scrollY<s)return t}return 0},totalNum:function(){var t=0;return this.cartFoodList.forEach(function(e){t+=e.num}),t},listShow:function(){var t=this;if(!this.totalNum)return this.showCartList=!0,!1;var e=!this.showCartList;return e&&this.$nextTick(function(){t.scroll?t.scroll.refresh():t.scroll=new m.default(t.$refs.listContent,{click:!0})}),e},payClass:function(){return this.allPrice>this.minPrice&&this.allPrice>0?"enough":"not-enough"},deliveryDesc:function(){console.log(1231231);var t=this.seller.dispatching.fees;if(this.allPrice<t[0].price){var e=this.totalPack,s=t[0].fee,i=this.allPrice;return this.USER_PRICE({totalPack:e,feesPrice:s,allPrice:i}),(0,w.setStore)("userPrice",[e,s,i]),"另需要配送费"+t[0].fee+"元"}for(var a=0,o=0;o<t.length;o++)this.allPrice>=t[o].price&&(a=o);var n=this.totalPack,r=t[a].fee,c=this.allPrice;return(0,w.setStore)("userPrice",[n,r,c]),this.USER_PRICE({totalPack:n,feesPrice:r,allPrice:c}),"另需要配送费"+t[a].fee+"元"},payDesc:function(){if(0===this.allPrice)return"￥"+this.minPrice+"元起送";if(this.allPrice<this.minPrice){var t=this.minPrice-this.allPrice;return"还差￥"+t+"元起送"}return"去结算"}}),methods:(0,p.default)({},(0,f.mapMutations)(["ADD_CART","REDUCE_CART","CLEAR_CART","INIT_BUYCART","USER_PRICE"]),{getShopState:function(){var t=this;return(0,d.default)(r.default.mark(function e(){return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:console.log(123),t.axios.get("/br/shop/status?shopId="+t.shopId+"&customerId="+t.customerId).then(function(e){if(e=e.data,console.log(e),e.success){if(1===e.data.state)return void(t.isYingye=!0);t.toggleToast(!e.data.state,"商家关闭"),t.isYingye=!1}});case 2:case"end":return e.stop()}},e,t)}))()},_initScroll:function(){var t=this;this.meunScroll=new m.default(this.$refs.menuWrapper,{click:!0}),this.foodsScroll=new m.default(this.$refs.foodsWrapper,{probeType:3,click:!0}),this.foodsScroll.on("scroll",function(e){t.scrollY=Math.abs(Math.round(e.y))})},_calculateHeight:function(){var t=this.$refs.foodList,e=0;this.listHeight.push(e);for(var s=0;s<t.length;s++){var i=t[s];e+=i.clientHeight,this.listHeight.push(e)}},selectMenu:function(t,e){if(e._constructed){var s=this.$refs.foodList,i=s[t];this.foodsScroll.scrollToElement(i,300)}},addFood:function(t){this._drop(t)},_drop:function(t){var e=this;this.$nextTick(function(){e.$refs.shopcart.drop(t)})},closeSpesc:function(){this.showSpecs=!1,this.specsIndex=0},showSpecsFun:function(t,e,s){this.showSpecs=!s,this.specs=e},selectSpecs:function(t){this.specsIndex=t},addSpecs:function(t,e,s,i,a,o,n){this.ADD_CART({shopid:this.shopId,categoryId:t,itemId:e,foodId:s,name:i,price:a,specs:o,packingFee:n}),this.closeSpesc()},addToCart:function(t,e,s,i,a,o,n){this.ADD_CART({shopid:this.shopId,categoryId:t,itemId:e,foodId:s,name:i,price:a,specs:o,packingFee:n})},removeOutCart:function(t,e,s,i,a,o,n){this.REDUCE_CART({shopid:this.shopId,categoryId:t,itemId:e,foodId:s,name:i,price:a,specs:o,packingFee:n})},initCategoryNum:function(){var t=this,e=[],s=0;this.totalPrice=0,this.totalPack=0,this.allPrice=0,this.cartFoodList=[],this.goods.forEach(function(i,a){if(t.shopCartList&&t.shopCartList[i.dishList[0].dishTypeRelations[0]]){var n=0;(0,o.default)(t.shopCartList[i.dishList[0].dishTypeRelations[0]]).forEach(function(e){(0,o.default)(t.shopCartList[i.dishList[0].dishTypeRelations[0]][e]).forEach(function(a){var o=t.shopCartList[i.dishList[0].dishTypeRelations[0]][e][a];n+=o.num,t.totalPack+=o.num*o.packingFee,t.totalPack=parseFloat(t.totalPack.toFixed(2)),t.totalPrice+=o.num*o.price,t.allPrice=parseFloat(t.totalPrice.toFixed(2))+parseFloat(t.totalPack.toFixed(2)),o.num>0&&(t.cartFoodList[s]={},t.cartFoodList[s].category_id=i.dishList[0].dishTypeRelations[0],t.cartFoodList[s].item_id=e,t.cartFoodList[s].food_id=a,t.cartFoodList[s].num=o.num,t.cartFoodList[s].price=o.price,t.cartFoodList[s].name=o.name,t.cartFoodList[s].specs=o.specs,t.cartFoodList[s].packingFee=o.packingFee,s++)})}),e[a]=n}else e[a]=0}),this.totalPrice=this.totalPrice.toFixed(2),this.categoryNum=e.concat([]),console.log(this.categoryNum)},getDishList:function(){var t=this,e={shopId:"ca2939cf-f42f-402f-8b75-53283431ee68",customerId:(0,w.getStore)("user").customerId};this.axios.get("/br/dish/list"+this.PublicJs.createParams(e)).then(function(e){e=e.data,e.success===x&&(t.goods=e.data.dishesList,t.$nextTick(function(){t._initScroll(),t._calculateHeight()}))})},getShopDetail:function(){var t=this;this.axios.get("./api/seller").then(function(e){e=e.data,e.success===x&&(t.shopDetail=e.data,e.data.dispatching.fees=t.PublicJs.bubbleSort(e.data.dispatching.fees,e.data.dispatching.fees.price),t.seller=(0,u.default)({},t.seller,e.data),t.PublicJs.changeTitleInWx(t.seller.name.split("（")[0]))})},toggleCartList:function(){this.showCartList=!this.showCartList},clearCart:function(){var t=window.confirm("清空购物车");console.log(t),t&&(this.toggleCartList(),this.CLEAR_CART(this.shopId))},hideList:function(){this.showCartList=!this.showCartList},drop:function(t){for(var e=0;e<this.balls.length;e++){var s=this.balls[e];if(!s.show)return s.show=!0,s.el=t,void this.dropBalls.push(s)}},beforeDrop:function(t){for(var e=this.balls.length;e--;){var s=this.balls[e];if(s.show){var i=s.el.getBoundingClientRect(),a=i.left-32,o=-(window.innerHeight-i.top-22);t.style.display="",t.style.webkitTransform="translate3d(0,"+o+"px,0)",t.style.transform="translate3d(0,"+o+"px,0)";var n=t.getElementsByClassName("inner-hook")[0];n.style.webkitTransform="translate3d("+a+"px,0,0)",n.style.transform="translate3d("+a+"px,0,0)"}}},dropping:function(t){t.offsetHeight;this.$nextTick(function(){t.style.webkitTransform="translate3d(0,0,0)",t.style.transform="translate3d(0,0,0)";var e=t.getElementsByClassName("inner-hook")[0];e.style.webkitTransform="translate3d(0,0,0)",e.style.transform="translate3d(0,0,0)"})},afterDrop:function(t){var e=this.dropBalls.shift();e&&(e.show=!1,t.style.display="none")},gotopay:function(){this.$router.push({path:"/submitOrder",query:{shopId:this.shopId,customerId:this.customerId}})}}),watch:{shopCartList:function(t){this.initCategoryNum()}},components:{shopcart:g.default,buyCart:I.default},filters:{toFixedFil:function(t){return t.toFixed(2)}}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s(8);e.default={props:{seller:{type:Object},detail:{type:Object,default:{}}},mounted:function(){},created:function(){},methods:{goSeller:function(){},goUser:function(){this.$router.push({path:"/orderList",query:{shopId:(0,i.getStore)("user").shopId,sessionId:(0,i.getStore)("user").customerId}})}}}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:{iconname:{type:String,default:""}}}},function(t,e,s){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=s(16),o=i(a),n=s(7),r=i(n),c=s(101),d=i(c),l=s(100),u=i(l),h=s(8),p=s(9),f=i(p),v=s(5);e.default={data:function(){return{shopDetail:{},detail:{},shopId:"",customerId:"",toastShow:!1,toastText:"",nowTime:new Date,endTime:"",deliveryfee:{},shopStatus:0}},created:function(){console.log("**下面是两个ID**"),console.log(this.$route.query.shopId),console.log(this.$route.query.customerId),console.log((0,h.urlParse)()),this.shopId=this.$route.query.shopId,this.customerId=this.$route.query.customerId,(0,h.setStore)("user",{customerId:this.userInfo,shopId:this.shopID}),this.getShopDetail()},mounted:function(){},computed:(0,r.default)({},(0,v.mapState)(["userInfo","shopID"])),methods:{getShopDetail:function(){var t=this,e={shopId:this.shopId,customerId:this.customerId};this.axios.get("/br/shop/detail"+this.PublicJs.createParams(e)).then(function(e){e=e.data,console.log(e),e.success&&(e.data.dispatching.fees=t.PublicJs.bubbleSort(e.data.dispatching.fees,e.data.dispatching.fees.price),t.detail=(0,o.default)({},t.detail,e.data.dispatching),t.shopDetail=(0,o.default)({},t.shopDetail,e.data),(0,h.setStore)("shopInfo",t.shopDetail),t.PublicJs.changeTitleInWx(t.shopDetail.name.split("（")[0]))})},toggleToast:function(t,e){var s=this;t!==!0&&1!==t||(this.toastShow=!this.toastShow,this.toastText=e,clearTimeout(this.timer),this.timer=setTimeout(function(){s.toastShow=!s.toastShow},1e3))}},components:{vheade:d.default,goods:u.default,toast:f.default}}},function(t,e,s){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=s(36),o=i(a),n=s(43),r=i(n),c=s(191);e.default={props:{selectFoods:{type:Array,default:function(){return[{price:20,count:1}]}},deliveryPrice:{type:Number,default:0},minPrice:{type:Number,default:0},seller:{type:Object},isYingye:{type:Boolean},specsIndex:{type:Number,default:0},post:null,error:null},data:function(){return{balls:[{show:!1},{show:!1},{show:!1},{show:!1},{show:!1}],dropBalls:[],fold:!0}},created:function(){console.log((0,c.loadFromLocal)(this.seller.id,"userName"))},computed:{totalPrice:function(){var t=0;return this.selectFoods.forEach(function(e){t+=Number(e.shopCartPrice)*e.count}),t},totalCount:function(){var t=0;return this.selectFoods.forEach(function(e){t+=e.count}),t},totalPack:function(){var t=0;return this.selectFoods.forEach(function(e){t+=Number(e.packPrice)*e.count}),t},payDesc:function(){if(0===this.totalPrice)return"￥"+this.minPrice+"元起送";if(this.totalPrice<this.minPrice){var t=this.minPrice-this.totalPrice;return"还差￥"+t+"元起送"}return"去结算"},payClass:function(){return this.totalPrice<this.minPrice?"not-enough":"enough"},deliveryDesc:function(){var t=this.seller.dispatching.fees;if(this.totalPrice+this.totalPack<t[0].price)return"另需要配送费"+t[0].fee+"元";for(var e=0,s=0;s<t.length;s++)this.totalPrice+this.totalPack>=t[s].price&&(e=s);return"另需要配送费"+t[e].fee+"元"},listShow:function(){var t=this;if(!this.totalCount)return this.fold=!0,!1;var e=!this.fold;return e&&this.$nextTick(function(){t.scroll?t.scroll.refresh():t.scroll=new o.default(t.$refs.listContent,{click:!0})}),e}},methods:{toggleList:function(){this.totalCount&&(this.fold=!this.fold)},hideList:function(){this.fold=!0},empty:function(){this.selectFoods.forEach(function(t){t.count=0})},addFood:function(t){this.drop(t)},drop:function(t){for(var e=0;e<this.balls.length;e++){var s=this.balls[e];if(!s.show)return s.show=!0,s.el=t,void this.dropBalls.push(s)}},beforeDrop:function(t){for(var e=this.balls.length;e--;){var s=this.balls[e];if(s.show){var i=s.el.getBoundingClientRect(),a=i.left-32,o=-(window.innerHeight-i.top-22);t.style.display="",t.style.webkitTransform="translate3d(0,"+o+"px,0)",t.style.transform="translate3d(0,"+o+"px,0)";var n=t.getElementsByClassName("inner-hook")[0];n.style.webkitTransform="translate3d("+a+"px,0,0)",n.style.transform="translate3d("+a+"px,0,0)"}}},dropping:function(t){t.offsetHeight;this.$nextTick(function(){t.style.webkitTransform="translate3d(0,0,0)",t.style.transform="translate3d(0,0,0)";var e=t.getElementsByClassName("inner-hook")[0];e.style.webkitTransform="translate3d(0,0,0)",e.style.transform="translate3d(0,0,0)"})},afterDrop:function(t){var e=this.dropBalls.shift();e&&(e.show=!1,t.style.display="none")},gotopay:function(){(0,c.saveToLocal)(this.seller.id,"userName",this.selectFoods),this.$router.push({path:"/submitOrder"})}},components:{buyCart:r.default}}},function(t,e,s){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=s(7),o=i(a),n=s(5);e.default={data:function(){return{isInvice:""}},created:function(){this.PublicJs.changeTitleInWx("发票抬头"),this.isInvice=this.invoice},computed:(0,o.default)({},(0,n.mapState)(["invoice"])),methods:(0,o.default)({},(0,n.mapMutations)(["CONFIRM_INVOICE"]),{gotoSubmitOrder:function(){this.CONFIRM_INVOICE(this.isInvice),this.$router.go(-1)}})}},function(t,e,s){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=s(7),o=i(a),n=s(5);e.default={data:function(){return{elseText:"",selectClass:!1,userSelect:!1,initremark:["不要辣","少要辣","多要辣"],remarkIndex:0}},created:function(){this.PublicJs.changeTitleInWx("订单备注"),this.remarkIndex=this.indexRemark,this.elseText=this.inputText,console.log(this.remarkIndex)},computed:(0,o.default)({},(0,n.mapState)(["indexRemark","inputText"])),methods:(0,o.default)({},(0,n.mapMutations)(["CONFIRM_REMARK"]),{selectRemark:function(t){this.remarkIndex=t},goSubmitOrder:function(){this.CONFIRM_REMARK({remarkText:this.initremark[this.remarkIndex],inputText:this.elseText,indexRemark:this.remarkIndex}),this.$router.go(-1)}})}},function(t,e,s){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e.default=t,e}function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=s(57),n=a(o),r=s(35),c=a(r),d=s(34),l=a(d),u=s(7),h=a(u),p=s(5),f=s(190),v=s(8),m=s(59),_=i(m),g=s(9),C=a(g),I=!0;e.default={data:function(){return{shopId:null,customerId:null,addRess:null,addressId:"",shopCart:null,newShopCart:[],packPrice:0,feesPrice:0,allPrice:0,allNum:0,shopInfo:{},discountList:{},toastShow:!1,toastText:"",options:[],selected:0,estimateTime:new Date,endTime:new Date,orderId:"",orderDish:[],isJinKuai:!1,isDiscount:!1}},created:function(){_.changeTitleInWx("确认订单"),this.customerId=this.$route.query.customerId,this.shopId=this.$route.query.shopId,this.addressId=this.userAddressId?this.userAddressId:"",this.INIT_BUYCART(),this.SAVE_SHOPID(this.shopId,this.customerId),this.shopCart=this.cartList[this.shopId],this.shopInfo=(0,v.getStore)("shopInfo"),this.packPrice=parseFloat((0,v.getStore)("userPrice")[0].toFixed(2)),this.feesPrice=parseFloat((0,v.getStore)("userPrice")[1].toFixed(2)),this.allPrice=parseFloat((0,v.getStore)("userPrice")[2].toFixed(2)),this.getAddRess(this.addressId),this.getDiscountList(),this.estimateTime=new Date((new Date).setMinutes((new Date).getMinutes()+this.shopInfo.makingTime+this.shopInfo.dispatching.duration));var t=parseFloat(this.shopInfo.hours[this.shopInfo.hours.length-1].endTime.split(":")[0]),e=parseFloat(this.shopInfo.hours[this.shopInfo.hours.length-1].endTime.split(":")[1])-15;this.endTime=new Date(this.endTime).setHours(t),this.endTime=new Date(this.endTime).setMinutes(e),this.endTime=new Date(this.endTime).setSeconds(0,0),this.options.push(Date.parse(this.estimateTime));var s=(new Date).setMinutes((new Date).getMinutes()+this.shopInfo.makingTime+this.shopInfo.dispatching.duration+15),i=new Date((new Date).setMinutes((new Date).getMinutes()+this.shopInfo.makingTime+this.shopInfo.dispatching.duration+15));if(console.log(i),console.log(i.getMinutes()),s>this.endTime)this.isJinKuai=!0;else{this.isJinKuai=!1,this.estimateTime=s>this.endTime?this.endTime:s;var a=Math.floor(i.getMinutes()/15);console.log(i),0===a?this.options.push(new Date(s).setMinutes(15)):1===a?this.options.push(new Date(s).setMinutes(30)):2===a?this.options.push(new Date(s).setMinutes(45)):3===a&&(new Date(new Date(s).setUTCMinutes(0)).setHours(new Date(s).getHours()+1),this.options.push(new Date(new Date(s).setUTCMinutes(0)).setHours(new Date(s).getHours()+1)));for(var o=this.options[1];o<this.endTime;)this.options.push(o+=9e5)}},mounted:function(){console.log(this.options),this.initData()},computed:(0,h.default)({},(0,p.mapState)(["cartList","remarkText","inputText","invoice","userAddressId"])),
methods:(0,h.default)({},(0,p.mapMutations)(["INIT_BUYCART","SAVE_SHOPID"]),{getDiscountList:function(){var t=this;return(0,l.default)(c.default.mark(function e(){var s;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:s={customerId:t.customerId,shopId:t.shopId,pageIndex:1,pageSize:10},t.axios.get("/br/shop/discount/list"+t.PublicJs.createParams(s)).then(function(e){e=e.data,e.success&&(t.discountList=e.data.discountList[0],t._isDiscount(e.data.discountList[0]))});case 2:case"end":return e.stop()}},e,t)}))()},getAddRess:function(t){var e=this;return(0,l.default)(c.default.mark(function s(){var i,a;return c.default.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:t?(i={sessionId:e.customerId,addressId:t},e.axios.get("/br/customer/address"+e.PublicJs.createParams(i)).then(function(t){t=t.data,t.success&&(e.addRess=t.data)})):(a={sessionId:e.customerId,shopId:e.shopId},e.axios.get("/br/customer/address/default"+e.PublicJs.createParams(a)).then(function(t){t=t.data,t.success===!0&&(e.addRess=t.data)}));case 1:case"end":return s.stop()}},s,e)}))()},initData:function(){var t=this;return(0,l.default)(c.default.mark(function e(){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.newShopCart=[],t.orderDish=[],(0,n.default)(t.shopCart).forEach(function(e){(0,n.default)(e).forEach(function(e){(0,n.default)(e).forEach(function(e){t.newShopCart.push({id:e.id,name:e.name,num:e.num,packingFee:e.packingFee,price:e.price,specs:e.specs}),t.orderDish.push({specificationId:e.id,count:e.num,price:e.price})})})});case 3:case"end":return e.stop()}},e,t)}))()},submitOrder:function(){var t=this;if(this.addRess){var e={shopId:this.shopId,customerId:this.customerId,originalPrice:this.allPrice+this.feesPrice,packPrice:this.packPrice,dispatchPrice:this.feesPrice,discountPrice:this.isDiscount?this.discountList.reductionAmount:0,shopDiscountId:this.isDiscount?this.discountList.id:"",paidPrice:this.allNum,addressId:this.addRess.addressId,receivingAddress:""+this.addRess.address+this.addRess.houseNum,expectTime:this.options[this.selected]/1e3,invoiceTitle:this.invoice,remark:""+this.remarkText+this.inputText,orderDish:this.orderDish};console.log("**提交数据**"),console.log(this.isDiscount),console.log(e),(0,v.setStore)("userOrderIofo",e);var s="/br/order";this.axios.post(s,e).then(function(e){e=e.data,e.success===I?(t.orderId=e.data.orderId,t.gotoPay()):t.toggleToast(1,e.message)})}else this.toggleToast(1,"请选择收货地址")},gotoPay:function(){this.$router.push({path:"/submitPay",query:{orderId:this.orderId}})},gotoAddList:function(){console.log(this.addRess),this.$router.push({path:"/addList",query:{shopId:this.shopId,customerId:this.customerId,addressId:null===this.addRess?"":this.addRess.addressId}})},_isDiscount:function(t){console.log("**是否可以优惠**");var e=this.allPrice+this.feesPrice,s=Date.parse(new Date)/1e3;console.log(e);var i=Date.parse(new Date(t.beginTime))/1e3,a=Date.parse(new Date(t.endTime))/1e3;i<=s<=a?e>=parseFloat(t.conditionAmount.toFixed(2))?(this.isDiscount=!0,e-t.reductionAmount>0?this.allNum=e-t.reductionAmount:this.allNum=0):(this.isDiscount=!1,this.allNum=e):(this.allNum=e,this.isDiscount=!1)},toggleToast:function(t,e){var s=this;t!==!0&&1!==t||(this.toastShow=!this.toastShow,this.toastText=e,clearTimeout(this.timer),this.timer=setTimeout(function(){s.toastShow=!s.toastShow},1e3))}}),filters:{formatDate:function(t){var e=new Date(t);return(0,f.formatDate)(e,"yyyy-MM-dd hh:mm")},toFixedFil:function(t){return t.toFixed(2)}},components:{toast:C.default}}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={replace:!0,data:function(){return{tipShow:!0,msTime:{show:!1,day:"",hour:"",minutes:"",seconds:""},star:"",end:"",current:""}},watch:{currentTime:function(t,e){this.gogogo()}},props:{tipText:{type:String,default:"距离开始"},tipTextEnd:{type:String,default:"距离结束"},id:{type:String,default:"1"},currentTime:{type:Number},startTime:{type:Number},endTime:{type:Number},endText:{type:String,default:"00:00:00"},secondsFixed:{type:Boolean,defaule:!1},dayTxt:{type:String,defaule:":"},hourTxt:{type:String,defaule:":"},minutesTxt:{type:String,defaule:":"},secondsTxt:{type:String,defaule:":"}},mounted:function(){this.gogogo()},methods:{gogogo:function(){var t=this;10===this.startTime.toString().length?this.star=1e3*this.startTime:this.star=this.startTime,10===this.endTime.toString().length?this.end=1e3*this.endTime:this.end=this.endTime,this.currentTime?10===this.currentTime.toString().length?this.current=1e3*this.currentTime:this.current=this.currentTime:this.current=(new Date).getTime(),this.end<this.current?(this.msTime.show=!1,this.end_message()):this.current<this.star?(this.$set(this,"tipShow",!0),setTimeout(function(){t.runTime(t.star,t.current,t.start_message)},1)):(this.end>this.current&&this.star<this.current||this.star===this.current)&&(this.$set(this,"tipShow",!1),this.msTime.show=!0,this.$emit("start_callback",this.msTime.show),setTimeout(function(){t.runTime(t.end,t.star,t.end_message,!0)},1))},runTime:function(t,e,s,i){var a=this,o=this.msTime,n=t-e;if(n>0){this.msTime.show=!0,o.day=Math.floor(n/864e5),n-=864e5*o.day,o.hour=Math.floor(n/36e5),n-=36e5*o.hour,o.minutes=Math.floor(n/6e4),n-=6e4*o.minutes,o.seconds=Math.floor(n/1e3).toFixed(0),n-=1e3*o.seconds,o.hour<10&&(o.hour="0"+o.hour),o.minutes<10&&(o.minutes="0"+o.minutes),o.seconds<10&&(o.seconds="0"+o.seconds);var r=Date.now(),c=Date.now(),d=c-r;setTimeout(function(){i?a.runTime(a.end,e+=1e3,s,!0):a.runTime(a.star,e+=1e3,s)},1e3-d)}else s()},start_message:function(){var t=this;this.$set(this,"tipShow",!1),this.$emit("start_callback",this.msTime.show),setTimeout(function(){t.runTime(t.end,t.star,t.end_message,!0)},1)},end_message:function(){this.msTime.show=!1,this.currentTime<=0||this.$emit("end_callback",this.msTime.show)}}}},function(t,e,s){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=s(7),o=i(a),n=s(108),r=i(n),c=s(9),d=i(c),l=s(8),u=s(5),h=!0;e.default={data:function(){return{currentTime:Math.round((new Date).getTime()/1e3),endTime:Math.round((new Date).setMinutes((new Date).getMinutes()+15)/1e3),isTime:!0,toastShow:!1,toastText:"",orderId:"",paidPrice:0}},mounted:function(){this.orderId=this.$route.query.orderId?this.$route.query.orderId:"",this.paidPrice=(0,l.getStore)("userOrderIofo").paidPrice?(0,l.getStore)("userOrderIofo").paidPrice:0},methods:(0,o.default)({},(0,u.mapMutations)(["CLEAR_CART"]),{countDownFun:function(){this.isTime=!this.isTime,this.toggleToast(1,"订单已超时")},weChatPay:function(){var t=this;if(this.isTime){if(this.PublicJs.isWechat()===!0)return void this.toggleToast(1,"仅支持微信中支付，且微信版本需在5.0以上");var e={customerId:(0,l.getStore)("user").customerId,shopId:(0,l.getStore)("user").shopId,orderId:this.orderId};this.axios.post("/br/order/pay",e).then(function(e){e=e.data,e.success===h?t.sendWxSDK(e.data):t.toggleToast(1,e.message)},function(e){t.toggleToast(1,e.message)})}else this.toggleToast(1,"订单已超时")},sendWxSDK:function(t){var e=this;WeixinJSBridge.invoke("getBrandWCPayRequest",{appId:t.appId,timeStamp:t.timeStamp,nonceStr:t.nonceStr,package:t.packageDetail,paySign:t.paySign,signType:t.signType},function(t){"get_brand_wcpay_request:ok"===t.err_msg?((0,l.removeStore)("buyCart"),this.CLEAR_CART((0,l.getStore)("user").shopId),e.toggleToast(1,"支付成功"),e.$router.replace({path:"/orderList",query:{shopId:(0,l.getStore)("user").shopId,sessionId:(0,l.getStore)("user").customerId}})):"get_brand_wcpay_request:cancel"===t.err_msg?e.toggleToast(1,"您已取消支付"):"get_brand_wcpay_request:fail"===t.err_msg&&e.toggleToast(1,"订单支付失败")})},toggleToast:function(t,e){var s=this;t!==!0&&1!==t||(this.toastShow=!this.toastShow,this.toastText=e,clearTimeout(this.timer),this.timer=setTimeout(function(){s.toastShow=!s.toastShow},1e3))}}),components:{CountDown:r.default,toast:d.default}}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:{text:{type:String},t:{type:Number,default:2e3},show:{type:Boolean,defalut:!1}}}},function(t,e,s){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=s(35),o=i(a),n=s(33),r=i(n),c=s(34),d=i(c),l=s(7),u=i(l),h=s(5);e.default={data:function(){return{sessionId:null,shopId:null,withinRange:[],outofRange:[],icon:{new:"btn_add_normal"},nowSelADDId:""}},created:function(){this.sessionId=this.$route.query.customerId?this.$route.query.customerId:"",this.nowSelADDId=this.$route.query.addressId?this.$route.query.addressId:"",this.shopId=this.$route.query.shopId?this.$route.query.shopId:"",this.getAddRess(),this.getADDList()},computed:(0,u.default)({},(0,h.mapState)(["addressIndex"])),methods:(0,u.default)({},(0,h.mapMutations)(["CHOOSE_ADDRESS","USER_ADDRESSID"]),{getADDList:function(){var t=this;return(0,d.default)(o.default.mark(function e(){var s;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:console.log("**地址列表**"),s={sessionId:t.sessionId,shopId:t.shopId},console.log((0,r.default)(s)),t.axios.get("/br/customer/address/list"+t.PublicJs.createParams(s)).then(function(e){console.log("**获取地址列表**"),e=e.data,console.log(s),console.log(e),e.success&&(t.withinRange=e.data.withinRange?e.data.withinRange:[],t.outofRange=e.data.outOfRange?e.data.outOfRange:[])});case 4:case"end":return e.stop()}},e,t)}))()},getAddRess:function(){var t=this;return(0,d.default)(o.default.mark(function e(){var s;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:s={sessionId:t.customerId,shopId:t.shopId},t.axios.get("/br/customer/address/default"+t.PublicJs.createParams(s)).then(function(e){e=e.data,e.success===!0&&(t.addRess=e.data)});case 2:case"end":return e.stop()}},e,t)}))()},selectAdd:function(t){this.USER_ADDRESSID(t),this.nowSelADDId=t,this.$router.replace({path:"/submitOrder",query:{shopId:this.shopId,customerId:this.sessionId}})},addNew:function(t){t?this.$router.replace({path:"/addNew",query:{shopId:this.shopId,sessionId:this.sessionId,addressId:t}}):this.$router.replace({path:"/addNew",query:{shopId:this.shopId,sessionId:this.sessionId}})},toggleToast:function(t,e){var s=this;t!==!0&&1!==t||(this.toastShow=!this.toastShow,this.toastText=e,clearTimeout(this.timer),this.timer=setTimeout(function(){s.toastShow=!s.toastShow},1e3))}})}},function(t,e,s){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=s(9),o=i(a);e.default={mounted:function(){this.addressId=this.$route.query.addressId?this.$route.query.addressId:"",this.shopId=this.$route.query.shopId?this.$route.query.shopId:"",this.sessionId=this.$route.query.sessionId?this.$route.query.sessionId:"",this.addressId&&this.getAddressDetail(this.addressId)},data:function(){return{toastShow:!1,toastText:"",isAjaxing:!1,shopId:"",sessionId:"",addressId:"",addressDetail:{name:"",phoneNumber:"",address:"",houseNum:"",gender:0},formValid:0,vaild:{name:!1,phoneNumber:!1,address:!1,houseNum:!1,gender:0}}},components:{Toast:o.default},watch:{"addressDetail.name":function(t,e){t?this.vaild.name=!0:this.vaild.name=!1},"addressDetail.phoneNumber":function(t,e){t&&/^1(3|4|5|7|8)\d{9}$/.test(t)?this.vaild.phoneNumber=!0:this.vaild.phoneNumber=!1},"addressDetail.address":function(t,e){t?this.vaild.address=!0:this.vaild.address=!1},"addressDetail.houseNum":function(t,e){t?this.vaild.houseNum=!0:this.vaild.houseNum=!1},"addressDetail.gender":function(t,e){t?this.vaild.gender=!0:this.vaild.gender=!1}},methods:{getAddressDetail:function(t){var e=this,s={sessionId:this.sessionId,addressId:t};this.axios.get("/br/customer/address"+this.PublicJs.createParams(s)).then(function(t){t.data.success&&(e.addressDetail=t.data.data,e.$emit("closeToast"))})},saveAddress:function(){if(!this.isAjaxing){this.isAjaxing=!0;var t={shopId:this.shopId,sessionId:this.sessionId,name:this.addressDetail.name,phoneNumber:this.addressDetail.phoneNumber,gender:this.addressDetail.gender,address:this.addressDetail.address,houseNum:this.addressDetail.houseNum};this.sendData(t)}},sendData:function(t){var e=this;if(this.addressId)t.addressId=this.addressId,this.axios.post("/br/customer/address",t).then(function(t){e.isAjaxing=!1,t.data.success?(e.toastShow=!0,e.toastText="保存成功",setTimeout(function(){e.toastShow=!1,e.backAddressList()},2e3)):(e.toastShow=!0,e.toastText="网络异常，请稍候重试",setTimeout(function(){e.toastShow=!1,e.toastText=""},1e3))},function(t){e.isAjaxing=!1,e.toastShow=!0,e.toastText="网络异常，请稍候重试",setTimeout(function(){e.toastShow=!1,e.toastText=""},1e3)});else{var s=this;this.axios.post("/br/customer/address",t).then(function(t){t=t.data,e.isAjaxing=!1,t.success?(s.toggleToast(1,t.message),e.backAddressList()):s.toggleToast(1,t.message)},function(t){e.toggleToast(1,t.data.data.message)})}},delAdderss:function(){var t=this;if(this.addressId&&!this.isAjaxing){this.isAjaxing=!0;var e={addressId:this.addressId,sessionId:this.sessionId};this.axios({method:"delete",url:"/br/customer/address",data:e}).then(function(e){t.isAjaxing=!1,e.data.success?t.backAddressList():(t.toastShow=!0,t.toastText="网络异常，请稍候重试",setTimeout(function(){t.toastShow=!1,t.toastText=""}))},function(e){t.isAjaxing=!1,t.toastShow=!0,t.toastText="网络异常，请稍候重试",setTimeout(function(){t.toastShow=!1,t.toastText=""})})}},backAddressList:function(){this.$router.replace({path:"/addList",query:{shopId:this.shopId,customerId:this.sessionId}})},toggleToast:function(t,e){var s=this;t!==!0&&1!==t||(this.toastShow=!this.toastShow,this.toastText=e,clearTimeout(this.timer),this.timer=setTimeout(function(){s.toastShow=!s.toastShow},1e3))},doCloseToast:function(){this.toastShow=!1}}}},function(t,e,s){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=s(9),o=i(a),n=s(8);e.default={mounted:function(){var t=this;this.orderNo=this.$route.query.orderNo?this.$route.query.orderNo:"",this.orderId=this.$route.query.orderId?this.$route.query.orderId:"",this.sessionId=this.$route.query.sid?this.$route.query.sid:"",this.shopId=this.$route.query.shopId?this.$route.query.shopId:"",this.$nextTick(function(){t.getOrderDetail()})},data:function(){return{toastShow:!1,toastText:"",sessionId:"",shopId:"",orderNo:"",orderId:"",isAjaxing:!1,icon:{phone:"btn_phone"},orderStatus:{iconCode:4,tip:""},orderDetail:{dishes:[]},iconCodeArr:["status0","status1","status2","status3","status4","status5","status6"],orderStatusTipArr:["","已付款，待商家接单","已接单，待配送","已接单，待配送","配送中，待收货","已完成","订单关闭"]}},components:{Toast:o.default},methods:{getOrderDetail:function(){var t=this,e={sessionId:this.sessionId,orderNo:this.orderNo};this.axios.get("/br/order"+this.PublicJs.createParams(e)).then(function(e){e.data.success?(t.orderDetail=e.data.data,t.orderStatus.iconCode=e.data.data.state,0===e.data.data.state?t.orderStatus.tip="请在"+t.addMinutes(e.data.data.orderTime,15)+"前付款，超过时间，订单将被自动取消":6===e.data.data.state&&(t.orderStatus.tip="超过15分钟未付款，系统取消了订单")):(t.toastShow=!0,t.toastText="网络异常，请稍候再试")},function(e){t.toastShow=!0,t.toastText="网络异常，请稍候再试"})},addMinutes:function(t,e){e=parseInt(e);var s=60*e*1e3;return s=parseInt(s),this.PublicJs.formatTime(new Date(Date.parse(t)+s).getTime()/1e3,"hh:mm")},callPhone:function(t){this.PublicJs.callPhone(t)},toPay:function(){var t=this;if(!this.PublicJs.isWechat())return this.toastShow=!0,void(this.toastText="仅支持微信中支付，且微信版本需在5.0以上");if(!this.isAjaxing){this.isAjaxing=!0;var e={sessionId:this.sessionId,shopId:this.shopId,orderId:this.orderId};this.axios.post("/br/order/pay",e).then(function(e){e.data.success?t.sendWxSDK(e.data.data):(t.toastShow=!0,t.toastText="网络异常，请稍候重试")},function(e){t.isAjaxing=!1,t.toastShow=!0,t.toastText="网络异常，请稍候重试"})}},sendWxSDK:function(t){WeixinJSBridge.invoke("getBrandWCPayRequest",{appId:t.appId,timeStamp:t.timeStamp,nonceStr:t.nonceStr,package:t.packageDetail,paySign:t.paySign,signType:t.signType},function(t){var e=this;this.isAjaxing=!1,this.toastShow=!0,"get_brand_wcpay_request:ok"===t.err_msg?(this.toastText="支付成功",setTimeout(function(){e.toastShow=!1,e.toastText=""},1e3),this.$route.replace({path:"/orderList",query:{shopId:(0,n.getStore)("user").shopId,sessionId:(0,n.getStore)("user").customerId}})):"get_brand_wcpay_request:cancel"===t.err_msg?(this.toastText="您已取消支付",setTimeout(function(){e.toastShow=!1,e.toastText=""},1e3)):"get_brand_wcpay_request:fail"===t.err_msg&&(this.toastText="支付失败",setTimeout(function(){e.toastShow=!1,e.toastText=""},1e3))})},doCloseToast:function(){this.toastShow=!1}}}},function(t,e,s){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=s(9),o=i(a);e.default={mounted:function(){var t=this,e=document.getElementById("orderlist"),s=document.getElementById("orderlist_scroll");e.style.height=document.body.clientHeight+"px",e.onscroll=function(){s.offsetHeight-e.offsetHeight-e.scrollTop<45&&t.hasMore&&t.getOrderList()},this.getOrderList()},data:function(){return{sessionId:"",shopId:"",pageIndex:1,pageSize:20,isAjaxing:!1,hasMore:!0,toastShow:!1,toastText:"",dataStatus:"",orderList:null,orderStatusText:["未付款","已付款","已接单","已接单","配送中","已完成","订单关闭","已拒单"]}},components:{Toast:o.default},created:function(){this.sessionId=this.$route.query.sessionId,this.shopId=this.$route.query.shopId},methods:{getOrderList:function(){var t=this;if(!this.isAjaxing){this.isAjaxing=!0,this.dataStatus="加载中...";var e={shopId:this.shopId,sessionId:this.sessionId,pageSize:this.pageSize,pageIndex:this.pageIndex};this.axios.get("/br/order/list"+this.PublicJs.createParams(e)).then(function(e){if(e=e.data,e.success){if(t.isAjaxing=!1,t.orderList)for(var s=0;s<e.data.lstOrderInfos.length;s++)t.orderList.push(e.data[s]);else t.orderList=e.data.lstOrderInfos;setTimeout(function(){e.data.hasMore?t.dataStatus="加载更多":t.dataStatus="没有更多了"},400),t.$nextTick(function(){t.pageIndex++,t.hasMore=e.data.hasMore})}else t.dataStatus="加载失败",t.toastShow=!0,t.toastText="网络异常，请稍候再试",setTimeout(function(){t.toastShow=!1,t.toastText=""},1e3)},function(e){t.isAjaxing=!1,t.dataStatus="加载失败",t.toastShow=!0,t.toastText="网络异常，请稍候再试",setTimeout(function(){t.toastShow=!1,t.toastText=""},1e3)})}},viewDetail:function(t,e){this.$router.push({path:"/orderDetail",query:{orderNo:t,orderId:e,sid:this.sessionId,shopId:this.shopId}})}}}},function(t,e,s){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=s(9),o=i(a);e.default={mounted:function(){this.PublicJs.changeTitleInWx("商家详情"),this.merchantId="ca2939cf-f42f-402f-8b75-53283431ee68",this.getShopInfo()},data:function(){return{toastShow:!1,toastText:"",merchantId:"",icons:{ad:"icon_Notice",activity:"icon_activity",info:"icon_business"},shopDetail:{}}},components:{Toast:o.default},methods:{getShopInfo:function(){var t=this;this.axios.get("/br/shop/detail?shopId="+this.merchantId).then(function(e){e=e.data,e.success?t.shopDetail=e.data:(t.toastShow=!0,t.toastText="网络异常，请稍候再试")},function(e){t.toastShow=!0,t.toastText="网络异常，请稍候再试"})}}}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={data:function(){return{msg:"静默授权",url:"",shopId:""}},created:function(){this.shopId=window.location.href.split("=")[1]},mounted:function(){this.url=window.location.href,this.url.indexOf("code")<0&&this.to()},methods:{to:function(){var t=encodeURIComponent("http://newpay.tunnel.qydev.com/VAOrderH5/#/jingmo1?shopId="+this.shopId),e="https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx980e7bb068f0b763&redirect_uri="+t+"&response_type=code&scope=snsapi_base&state=STATE#wechat_redirect";window.location.href=e}}}},function(t,e,s){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=s(7),o=i(a),n=s(8),r=s(5);e.default={data:function(){return{msg:"静默授权",url:"",shopId:"",customerId:""}},created:function(){var t=window.location.href.split("=");this.shopId=t[t.length-1]},mounted:function(){this.url=window.location.href,this.url.indexOf("code")>0&&(console.log("**我是code**"),console.log((0,n.urlParse)().code),this.getOpenId())},methods:(0,o.default)({},(0,r.mapMutations)(["RECORD_USERINFO"]),{getOpenId:function(){var t=this,e={code:(0,n.urlParse)().code,type:1},s="/mp/authority/customer";this.axios.post(s,e).then(function(e){var s=e.data;s.success&&(t.RECORD_USERINFO({shopID:t.shopId,customerId:s.data.customerId}),t.jump(s.data.customerId))},function(t){})},jump:function(t){window.location.href="http://newpay.tunnel.qydev.com/VAOrderH5/#/index?shopId="+this.shopId+"&customerId="+t}})}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s(8);e.default={data:function(){return{msg:"用户授权",url:"",shopId:""}},created:function(){var t=window.location.href.split("=");this.shopId=t[1],(0,i.setStore)("userInfoID",{shopId:this.shopId,customerId:""}),this.url=window.location.href,this.url.indexOf("code")<0?this.to():this.getOpenId()},methods:{to:function(){var t=encodeURIComponent("http://newpay.tunnel.qydev.com/VAOrderH5/#/zhengchang1shopId="+this.shopId),e="https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx980e7bb068f0b763&redirect_uri="+t+"&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect";window.location.href=e},getOpenId:function(){var t=this,e={code:(0,i.urlParse)().code,type:2},s="/mp/authority/customer";this.axios.post(s,e).then(function(e){var s=e.data;s.success&&(t.jump(s.data.customerId),(0,i.setStore)("userInfoID",{shopId:t.shopId,customerId:s.data.customerId}))},function(t){console.log(t)})},jump:function(t){window.location.href="http://newpay.tunnel.qydev.com/VAOrderH5/#/index?shopId="+this.shopId+"&?customerId="+t}}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s(8);e.default={data:function(){return{msg:"用户授权",url:"",shopId:""}},created:function(){var t=window.location.href.split("=");this.shopId=t[t.length-1]},mounted:function(){this.url=window.location.href,this.url.indexOf("code")>0&&this.getOpenId()},methods:{getOpenId:function(){var t=this,e={code:(0,i.urlParse)().code,type:2},s="/mp/authority/customer";this.axios.post(s,e).then(function(e){var s=e.data;s.success&&t.jump(s.data.customerId)},function(t){console.log(t)})},jump:function(t){window.location.href="http://newpay.tunnel.qydev.com/VAOrderH5/#/index?shopId="+this.shopId+"&?customerId="+t}}}}]);